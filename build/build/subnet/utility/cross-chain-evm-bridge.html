<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-build/subnet/utility/cross-chain-evm-bridge" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Deploy a Cross-Chain EVM Bridge | Lux Network Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:image" content="https://docs.lux.network/img/Lux-OG-Image.png?force-reload-1"><meta data-rh="true" name="twitter:image" content="https://docs.lux.network/img/Lux-OG-Image.png?force-reload-1"><meta data-rh="true" property="og:url" content="https://docs.lux.network/build/subnet/utility/cross-chain-evm-bridge"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:description" content="The fastest, most reliable smart contracts platform in the world. Build anything you want, any way you want, on the eco-friendly blockchain designed for Web3 devs."><meta data-rh="true" name="twitter:title" content="Lux Network Docs: Create Without Limits"><meta data-rh="true" name="keywords" content="Lux Network Docs: Create Without Limits"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Deploy a Cross-Chain EVM Bridge | Lux Network Docs"><meta data-rh="true" name="description" content="This tutorial demonstrates the process of deploying a cross-chain bridge between two EVM chains. Build at your own risk."><meta data-rh="true" property="og:description" content="This tutorial demonstrates the process of deploying a cross-chain bridge between two EVM chains. Build at your own risk."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.lux.network/build/subnet/utility/cross-chain-evm-bridge"><link data-rh="true" rel="alternate" href="https://docs.lux.network/build/subnet/utility/cross-chain-evm-bridge" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://docs.lux.network/build/subnet/utility/cross-chain-evm-bridge" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://4842GXJR5Q-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-PLV38BFX",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>


<link rel="search" type="application/opensearchdescription+xml" title="Lux Network Docs" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.dc674c1c.css">
<script src="/assets/js/runtime~main.4865551f.js" defer="defer"></script>
<script src="/assets/js/main.6c78fe2d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PLV38BFX" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Lux_Horizontal_Red.svg" alt="Lux Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/Lux_Horizontal_Red.svg" alt="Lux Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/intro">Learn</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Build</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/build/dapp">Dapps</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/build/subnet">Subnets</a></li><li><a class="dropdown__link" href="/build/vm">Virtual Machines</a></li></ul></div><a class="navbar__item navbar__link" href="/nodes">Nodes</a><a class="navbar__item navbar__link" href="/tooling">Tooling</a><a class="navbar__item navbar__link" href="/reference">Reference</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/luxdefi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><span class="menu__item"><b><medium> ‚ñº Lux Subnets </medium></b></span></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/build/subnet">üîó Quick Links</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/build/subnet/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/build/subnet/c-chain-vs-subnet">C-Chain or Subnet?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/build/subnet/hello-subnet">Build Your First Subnet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><span class="menu__item"><b><medium> Deploy a Subnet </medium></b></span></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/build/subnet/deploy/local-subnet">On a Local Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/build/subnet/deploy/testnet-subnet">On Testnet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/build/subnet/deploy/mainnet-subnet">On Lux Mainnet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/build/subnet/deploy/on-prod-infra">On Production Infrastructure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/build/subnet/deploy/multisig-auth">With Multisig Authorization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/build/subnet/deploy/custom-vm-subnet">With a Custom Virtual Machine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><span class="menu__item"><b><medium> Elastic Subnets </medium></b></span></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/build/subnet/elastic/transform-to-elastic-subnet">Make Subnet Permissionless</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/build/subnet/elastic/elastic-parameters">Parameters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><span class="menu__item"><b><medium> Manage Subnets </medium></b></span></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/build/subnet/maintain/view-subnets">Maintain</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/build/subnet/utility/deploy-smart-contract-to-subnet">Add Utility</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/build/subnet/utility/deploy-smart-contract-to-subnet">Deploy a Smart Contract</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/build/subnet/utility/subnet-faucet">Add a Testnet Faucet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/build/subnet/utility/cross-chain-evm-bridge">Add a Cross-Chain Bridge</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/build/subnet/upgrade/considerations-subnet-upgrade">Upgrade</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tooling/cli">üìé Lux-CLI: Subnets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/nodes/run/subnet-node">Subnet Nodes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/build/subnet/info/wagmi">Case Study: WAGMI Subnet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/build/subnet/info/troubleshoot-subnet">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://support.lux.network/en/articles/6158840-subnet-faq" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">‚ùìFAQ<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Add Utility</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Add a Cross-Chain Bridge</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Deploy a Cross-Chain EVM Bridge</h1>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>This tutorial is for demo purpose on how to build a cross-chain bridge. It is not for production use.
You must take the full responsibility to ensure your bridge&#x27;s security.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h2>
<p>In this tutorial, we will be building a bridge between <strong><a href="/build/subnet/info/wagmi">WAGMI</a></strong> and
<strong><a href="/learn/lux/testnet">Testnet</a></strong>. This bridge will help us to transfer native <strong>WGM</strong> coin
wrapped into <strong>wWGM</strong> back and forth from the WAGMI chain to the Testnet chain. Using this guide, you
can deploy a bridge between any EVM-based chains for any ERC20 tokens.</p>
<p>The wrapped version of a native coin is its pegged ERC20 representation. Wrapping it with the ERC20
standard makes certain processes like delegated transactions much easier. You can easily get wrapped
tokens by sending the native coin to the wrapped token contract address.</p>
<blockquote>
<p>WAGMI is an independent EVM-based test chain deployed on a custom Subnet on the Lux network.</p>
</blockquote>
<p>We will be using <strong>ChainSafe</strong>&#x27;s bridge repository, to easily set up a robust and secure bridge.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-of-the-bridge">Workflow of the Bridge<a href="#workflow-of-the-bridge" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h2>
<p>WAGMI and Testnet chains are not interconnected by default, however, we could make them communicate.
Relayers watch for events (by polling blocks) on one chain and perform necessary action using those
events on the other chain. This way we can also perform bridging of tokens from one chain to the
other chain through the use of smart contracts.</p>
<p>Here is the basic high-level workflow of the bridge -</p>
<ul>
<li>Users deposit token on the Bridge contract</li>
<li>Bridge contract asks Handler contract to perform deposit action</li>
<li>Handler contract <strong>locks</strong> the deposited token in the token safe</li>
<li>Bridge contract emits <code>Deposit</code> event</li>
<li>Relayer receives the <code>Deposit</code> event from the source chain</li>
<li>Relayer creates a voting proposal on the destination chain to mint a new token</li>
<li>After threshold relayer votes, the proposal is executed</li>
<li>Tokens are <strong>minted</strong> to the recipient&#x27;s address</li>
</ul>
<p>Bridging tokens from source to destination chain involves the <strong>lock and mint</strong> approach. Whereas
bridging tokens from destination to source chain involves <strong>burn and release</strong> approach. We cannot
mint and burn tokens that we do not control. Therefore we lock them in the token safe on the source
chain. And mint the corresponding token (which we will deploy and hence control) on the destination
chain.</p>
<p><img loading="lazy" alt="architecture" src="/assets/images/chainsafe-bridge-1-workflow-d8ad88d35b0e2b4bb21b75136bd7cf99.png" width="4504" height="3022" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h2>
<p>These are the requirement to follow this tutorial -</p>
<ul>
<li>Set up <a href="/build/subnet/info/wagmi#adding-wagmi-to-core">WAGMI</a> and
<a href="/build/dapp/testnet-workflow#set-up-testnet-network-on-core-optional">Testnet</a> on Core</li>
<li>Import <code>wWGM</code> token (asset) on the WAGMI network (Core). Here is the address - <code>0x3Ee7094DADda15810F191DD6AcF7E4FFa37571e4</code></li>
<li><code>WGM</code> coins on the WAGMI chain. Drip <code>1 WGM</code> from the <a href="https://faucet.trywagmi.xyz/" target="_blank" rel="noopener noreferrer">WAGMI Faucet</a>.</li>
<li><code>LUX</code> coins on the Testnet chain. Drip <code>10 LUX</code> from the <a href="https://faucet.lux.network/" target="_blank" rel="noopener noreferrer">Testnet Faucet</a></li>
<li>Wrapped <code>WGM</code> tokens on the WAGMI chain. Send a few <code>WGM</code> coins to the <code>wWGM</code> token address (see
second point), to receive the same amount of <code>wWGM</code>. Always keep some <code>WGM</code> coins, to cover transaction
fees.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-environment">Setting Up Environment<a href="#setting-up-environment" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h2>
<p>Let&#x27;s make a new directory <code>deploy-bridge</code>, where we will be keeping our bridge codes. We will be
using the following repositories -</p>
<ul>
<li><a href="https://github.com/ChainSafe/chainbridge-deploy" target="_blank" rel="noopener noreferrer"><code>ChainSafe/chainbridge-deploy</code></a> - This will help
us in setting up of our bridge contracts</li>
<li><a href="https://github.com/ChainSafe/ChainBridge" target="_blank" rel="noopener noreferrer"><code>ChainSafe/ChainBridge</code></a> - This will help us in setting
up of our off-chain relayer.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-chainbridge-command-line-tool">Installing ChainBridge Command-Line Tool<a href="#installing-chainbridge-command-line-tool" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3>
<p>Using the following command, we can clone and install ChainBridge&#x27;s command-line tool. This will
help us in setting up bridge contracts and demonstrating bridge transfers. Once the bridge contracts
are deployed, you can use its ABI and contract address to set up your UI.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone -b v1.0.0 --depth 1 https://github.com/ChainSafe/chainbridge-deploy \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&amp;&amp; cd chainbridge-deploy/cb-sol-cli \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&amp;&amp; npm install \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&amp;&amp; make install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will build the contracts and installs the <code>cb-sol-cli</code> command.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-environment-variables">Setting Up Environment Variables<a href="#setting-up-environment-variables" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3>
<p>Let&#x27;s set up environment variables, so that, we do not need to write their values every time we
issue a command. Move back to the <code>deploy-bridge</code> directory (main project directory) and make a
new file <code>configVars</code>. Put the following contents inside it -</p>
<div class="language-env codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-env codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">SRC_GATEWAY=https://subnets.lux.network/wagmi/wagmi-chain-testnet/rpc</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">DST_GATEWAY=https://api.lux-test.network/ext/bc/C/rpc</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">SRC_ADDR=&quot;&lt;Your address on WAGMI&gt;&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">SRC_PK=&quot;&lt;your private key on WAGMI&gt;&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">DST_ADDR=&quot;&lt;Your address on Testnet&gt;&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">DST_PK=&quot;&lt;your private key on Testnet&gt;&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">SRC_TOKEN=&quot;0x3Ee7094DADda15810F191DD6AcF7E4FFa37571e4&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RESOURCE_ID=&quot;0x00&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>SRC_ADDR</code> and <code>DST_ADDR</code> are the addresses that will deploy bridge contracts and will act as a relayer.</li>
<li><code>SRC_TOKEN</code> is the token that we want to bridge. Here is the address of the wrapped ERC20 version
of the WGM coin aka wWGM.</li>
<li><code>RESOURCE_ID</code> could be anything. It identifies our bridged ERC20 tokens on both sides (WAGMI and Testnet).</li>
</ul>
<p>Every time we make changes to these config variables, we have to update our bash environment. Run
the following command according to the relative location of the file. These variables are temporary
and are only there in the current terminal session, and will be flushed, once the session is over.
Make sure to load these environment variables anywhere you will using them in the bash commands
(like <code>$SRC_GATEWAY</code> or <code>$SRC_ADDR</code>)</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">source ./configVars</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-source-chain">Setting Up Source Chain<a href="#setting-up-source-chain" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h2>
<p>We need to set up our source chain as follows -</p>
<ul>
<li>Deploy Bridge and Handler contract with <code>$SRC_ADDR</code> as default and only relayer</li>
<li>Register the <code>wWGM</code> token as a resource on the bridge</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-source-contracts">Deploy Source Contracts<a href="#deploy-source-contracts" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3>
<p>The command-line tool <code>cb-sol-cli</code> will help us to deploy the contracts. Run the following command
in the terminal session where the config vars are loaded. It will add <code>SRC_ADDR</code> as the default
relayer for relaying events from the WAGMI chain (source) to the Testnet chain (destination).</p>
<p><strong>One of the most important parameter to take care of while deploying bridge contract is the <code>expiry</code></strong>
<strong>value. It is the number of blocks after which a proposal is considered cancelled. By default it is</strong>
<strong>set to <code>100</code>. On Lux Mainnet, with this value, the proposals could be expired within 3-4 minutes.</strong>
<strong>You should choose a very large expiry value, according to the chain you are deploying bridge to.</strong>
<strong>Otherwise your proposal will be cancelled if the threshold number of vote proposals are not received</strong>
<strong>on time.</strong></p>
<p>You should also keep this in mind that sometimes during high network activity, a transaction could
stuck for a long time. Proposal transactions stuck in this scenario, could result in the cancellation
of previous proposals. Therefore, expiry values should be large enough, and relayers should issue
transactions with a competitive max gas price.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cb-sol-cli --url $SRC_GATEWAY --privateKey $SRC_PK --gasPrice 25000000000 deploy \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --bridge --erc20Handler \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --relayers $SRC_ADDR \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --relayerThreshold 1 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --expiry 500 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --chainId 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The output will return deployed contracts&#x27; (Bridge and Handler) address. Update the <code>configVars</code>
file with these addresses by adding the following 2 variables and loading them to the environment.</p>
<div class="language-env codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-env codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">SRC_BRIDGE=&quot;&lt;resulting bridge contract address&gt;&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">SRC_HANDLER=&quot;&lt;resulting erc20 handler contract address&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Make sure to load these using the <code>source</code> command.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-resource-on-bridge">Configure Resource on Bridge<a href="#configure-resource-on-bridge" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3>
<p>Run the following command to register the <code>wWGM</code> token as a resource on the source bridge.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cb-sol-cli --url $SRC_GATEWAY --privateKey $SRC_PK --gasPrice 25000000000 bridge register-resource \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --bridge $SRC_BRIDGE \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --handler $SRC_HANDLER \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --resourceId $RESOURCE_ID \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --targetContract $SRC_TOKEN</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-destination-chain">Setting Up Destination Chain<a href="#setting-up-destination-chain" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h2>
<p>We need to set up our destination chain as follows -</p>
<ul>
<li>Deploy Bridge and Handler contract with <code>$DST_ADDR</code> as default and only relayer</li>
<li>Deploy mintable and burnable ERC20 contract representing bridged <code>wWGM</code> token</li>
<li>Register the <code>wWGM</code> token as a resource on the bridge</li>
<li>Register the<code> wWGM</code> token as mintable/burnable on the bridge</li>
<li>Giving permissions to Handler contract to mint new <code>wWGM</code> tokens</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-destination-contracts">Deploy Destination Contracts<a href="#deploy-destination-contracts" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3>
<p>Run the following command to deploy Bridge, ERC20 Handler, and <code>wWGM</code> token contracts on the Testnet
chain. Again it will set <code>DST_ADDR</code> as the default relayer for relaying events from Testnet chain
(destination) to WAGMI chain (source). For this example, both <code>SRC_ADDR</code> and <code>DST_ADDR</code> represent
the same thing.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cb-sol-cli --url $DST_GATEWAY --privateKey $DST_PK --gasPrice 25000000000 deploy\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --bridge --erc20 --erc20Handler \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --relayers $DST_ADDR \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --relayerThreshold 1 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --chainId 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Update the environment variables with the details which you will get by running the above command.
Don&#x27;t forget to load these variables.</p>
<div class="language-env codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-env codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">DST_BRIDGE=&quot;&lt;resulting bridge contract address&gt;&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">DST_HANDLER=&quot;&lt;resulting erc20 handler contract address&gt;&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">DST_TOKEN=&quot;&lt;resulting erc20 token address&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-resource-on-bridge">Configuring Resource on Bridge<a href="#configuring-resource-on-bridge" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3>
<p>Run the following command to register deployed <code>wWGM</code> token as a resource on the bridge.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cb-sol-cli --url $DST_GATEWAY --privateKey $DST_PK --gasPrice 25000000000 bridge register-resource \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --bridge $DST_BRIDGE \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --handler $DST_HANDLER \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --resourceId $RESOURCE_ID \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --targetContract $DST_TOKEN</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-token-as-mintable-and-burnable-on-bridge">Setting Token as Mintable and Burnable on Bridge<a href="#setting-token-as-mintable-and-burnable-on-bridge" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3>
<p>The bridge has two options when it receives a deposit of a token -</p>
<ul>
<li>Lock the received token on one chain and mint the corresponding token on the other chain</li>
<li>Burn the received token on one chain and release the corresponding token on the other chain</li>
</ul>
<p>We cannot mint or burn any token which we do not control. Though we can lock and release such tokens
by putting them in a token safe. The bridge has to know which token it can burn. With the following
command, we can set the resource as burnable. The bridge will choose the action accordingly, by
seeing the token as burnable or not.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cb-sol-cli --url $DST_GATEWAY --privateKey $DST_PK --gasPrice 25000000000 bridge set-burn \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --bridge $DST_BRIDGE \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --handler $DST_HANDLER \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --tokenContract $DST_TOKEN</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="authorizing-handler-to-mint-new-tokens">Authorizing Handler to Mint New Tokens<a href="#authorizing-handler-to-mint-new-tokens" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3>
<p>Now let&#x27;s permit the handler to mint the deployed ERC20 (wWGM) token on the destination chain. Run
the following command.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cb-sol-cli --url $DST_GATEWAY --privateKey $DST_PK --gasPrice 25000000000 erc20 add-minter \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --minter $DST_HANDLER \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --erc20Address $DST_TOKEN</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>The deployer of the contracts (here <code>SRC_ADDR</code> or <code>DST_ADDR</code>) holds the admin rights. An admin</strong>
<strong>can add or remove a new relayer, minter, admin etc. It can also mint new ERC20 tokens on the</strong>
<strong>destination chain. You can issue these commands using <code>cb-sol-cli</code> with the options mentioned in</strong>
<strong>these <a href="https://github.com/ChainSafe/chainbridge-deploy/tree/main/cb-sol-cli/docs" target="_blank" rel="noopener noreferrer">files</a>. The mint</strong>
<strong>command should not be used manually, unless some intervention is required, when the relayers failed</strong>
<strong>to mint the tokens on the destination chain on time.</strong></p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-relayer">Deploy Relayer<a href="#deploy-relayer" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h2>
<p>All the on-chain setups like deploying bridges, handlers, tokens, etc. are complete. But the two
chains are not interconnected. We need some off-chain relayer to communicate messages between the
chains. The relayer will poll for deposit events on one chain, and submit vote proposals to mint or
release the corresponding token on another chain.</p>
<p>Since we set the relayer threshold to 1, while deploying the bridge and handler, we require a voting
proposal from only 1 relayer. But in production, we should use a large set of relayers with a high
threshold to avoid power concentration.</p>
<p>For this purpose, we will be using ChainSafe&#x27;s relayer. Follow the steps described below to deploy
the relayer.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cloning-and-building-relayer">Cloning and Building Relayer<a href="#cloning-and-building-relayer" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3>
<p>Open a new terminal session, while keeping the previous session loaded with environment variables.
We have to load the environment variables in this session too. Load these variables in this session
too using the <code>source</code> command.</p>
<p>Now, move to the <code>deploy-bridge</code> directory and run the following command to clone the relayer repository
(implemented in Go), and build its binary.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone -b v1.1.1 --depth 1 https://github.com/ChainSafe/chainbridge \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&amp;&amp; cd chainbridge \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&amp;&amp; make build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will create a binary inside the <code>chainbridge/build</code> directory as <code>chainbridge</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-relayer">Configuring Relayer<a href="#configuring-relayer" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3>
<p>The relayer requires some configurations like source chain, destination chain, bridge, handler
address, etc. Run the following command. It will make a <code>config.json</code> file with the required
details in it. You can update these details, as per your need.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &quot;{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  \&quot;chains\&quot;: [</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      \&quot;name\&quot;: \&quot;WAGMI\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      \&quot;type\&quot;: \&quot;ethereum\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      \&quot;id\&quot;: \&quot;0\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      \&quot;endpoint\&quot;: \&quot;$SRC_GATEWAY\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      \&quot;from\&quot;: \&quot;$SRC_ADDR\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      \&quot;opts\&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        \&quot;bridge\&quot;: \&quot;$SRC_BRIDGE\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        \&quot;erc20Handler\&quot;: \&quot;$SRC_HANDLER\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        \&quot;genericHandler\&quot;: \&quot;$SRC_HANDLER\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        \&quot;gasLimit\&quot;: \&quot;1000000\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        \&quot;maxGasPrice\&quot;: \&quot;50000000000\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        \&quot;http\&quot;: \&quot;true\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        \&quot;blockConfirmations\&quot;:\&quot;0\&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      \&quot;name\&quot;: \&quot;Testnet\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      \&quot;type\&quot;: \&quot;ethereum\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      \&quot;id\&quot;: \&quot;1\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      \&quot;endpoint\&quot;: \&quot;$DST_GATEWAY\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      \&quot;from\&quot;: \&quot;$DST_ADDR\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      \&quot;opts\&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        \&quot;bridge\&quot;: \&quot;$DST_BRIDGE\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        \&quot;erc20Handler\&quot;: \&quot;$DST_HANDLER\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        \&quot;genericHandler\&quot;: \&quot;$DST_HANDLER\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        \&quot;gasLimit\&quot;: \&quot;1000000\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        \&quot;maxGasPrice\&quot;: \&quot;50000000000\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        \&quot;http\&quot;: \&quot;true\&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        \&quot;blockConfirmations\&quot;:\&quot;0\&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}&quot; &gt;&gt; config.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Check and confirm the details in the <code>config.json</code> file.</p>
<blockquote>
<p>In the above command, you can see that <code>blockConfirmations</code> is set to <code>0</code>. This will work well for
networks like Lux because the block is confirmed once it&#x27;s committed. Unlike other chains such
as Ethereum, which requires 20-30 block confirmations. Therefore, use this configuration with
caution, depending on the type of chain you are using.</p>
<p>It can cause serious problems if a corresponding token is minted or released based on an
unconfirmed block.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-up-keys">Set Up Keys<a href="#set-up-keys" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3>
<p>Give relayer access to your keys. Using these keys, the relayer will propose deposit events and
execute proposals. It will ask to set a password for encrypting these keys. Every time you start
the relayer, it will ask for this password.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./build/chainbridge accounts import --privateKey $SRC_PK</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./build/chainbridge accounts import --privateKey $DST_PK</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lets-test-the-bridge">Let&#x27;s Test the Bridge<a href="#lets-test-the-bridge" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h2>
<p>The setup is now complete - both on-chain and off-chain. Now we just have to start the relayer and
test the bridge. For testing purposes, we will be using <code>cb-sol-cli</code> to make deposit transactions on
the bridge. But you can make your frontend and integrate it with the bridge using the ABIs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-relayer">Start Relayer<a href="#start-relayer" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3>
<p>Run the following command to start the relayer. It will print logs of all the events associated with
our bridge, happening on both the chains. So keep the relayer running and follow the next commands
in the other terminal session.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./build/chainbridge --config config.json --verbosity trace --latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="approve-handler-to-spend-my-tokens">Approve Handler to Spend my Tokens<a href="#approve-handler-to-spend-my-tokens" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3>
<p>Now, let&#x27;s deposit tokens on the WAGMI bridge. But before that, we need to approve the handler to
spend (lock or burn) tokens on our (here <code>SRC_PK</code>) behalf. The amount here is in Wei (1 ether (WGM)
= 10^18 Wei). We will be approving 0.1 wWGM.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cb-sol-cli --url $SRC_GATEWAY --privateKey $SRC_PK --gasPrice 25000000000 erc20 approve \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --amount 100000000000000000 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --erc20Address $SRC_TOKEN \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --recipient $SRC_HANDLER</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deposit-tokens-to-the-bridge">Deposit Tokens to the Bridge<a href="#deposit-tokens-to-the-bridge" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3>
<p>Once approved, we can send a deposit transaction. Now let&#x27;s deposit 0.1 wWGM on the bridge. The
handler will lock (transfer to token safe) 0.1 wWGM from our address (here <code>SRC_PK</code>) and mint the
new tokens on the destination chain to the recipient (here <code>DST_ADDR</code>).</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cb-sol-cli --url $SRC_GATEWAY --privateKey $SRC_PK --gasPrice 25000000000 erc20 deposit \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --amount 100000000000000000 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --dest 1 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --bridge $SRC_BRIDGE \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --recipient $DST_ADDR \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --resourceId $RESOURCE_ID</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This transaction will transfer 0.1 wWGM to token safe and emit a <code>Deposit</code> event, which will be
captured by the relayer. Following this event, it will send a voting proposal to the destination
chain. Since the threshold is 1, the bridge will execute the proposal, and new wWGM minted to the
recipient&#x27;s address. Here is the screenshot of the output from the relayer.</p>
<p><img loading="lazy" alt="output" src="/assets/images/chainsafe-bridge-2-relayer-output-47d1c545466048dcd36585c421e2d9a3.png" width="3434" height="1096" class="img_ev3q"></p>
<p>Similarly, we can transfer the tokens back to the WAGMI chain.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h2>
<p>Similar to the above process, you can deploy a bridge between any 2 EVM-based chains. We have used
the command-line tool to make approvals and deposits. This can be further extended to build a
frontend integrated with the bridge. Currently, it depends on a single relayer, which is not secure.
We need a large set of relayers and a high threshold to avoid any kind of centralization.</p>
<p>You can learn more about these contracts and implementations by reading ChainSafe&#x27;s
<a href="https://chainbridge.chainsafe.io/" target="_blank" rel="noopener noreferrer">ChainBridge</a> documentation.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/build">Build</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/subnets">Subnets</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/luxdefi/docs/edit/main/docs/build/subnet/utility/cross-chain-evm-bridge.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/build/subnet/utility/subnet-faucet"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Lux Subnet Faucet</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/build/subnet/upgrade/considerations-subnet-upgrade"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Key Considerations When Upgrading a Subnet</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#workflow-of-the-bridge" class="table-of-contents__link toc-highlight">Workflow of the Bridge</a></li><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#setting-up-environment" class="table-of-contents__link toc-highlight">Setting Up Environment</a><ul><li><a href="#installing-chainbridge-command-line-tool" class="table-of-contents__link toc-highlight">Installing ChainBridge Command-Line Tool</a></li><li><a href="#setting-up-environment-variables" class="table-of-contents__link toc-highlight">Setting Up Environment Variables</a></li></ul></li><li><a href="#setting-up-source-chain" class="table-of-contents__link toc-highlight">Setting Up Source Chain</a><ul><li><a href="#deploy-source-contracts" class="table-of-contents__link toc-highlight">Deploy Source Contracts</a></li><li><a href="#configure-resource-on-bridge" class="table-of-contents__link toc-highlight">Configure Resource on Bridge</a></li></ul></li><li><a href="#setting-up-destination-chain" class="table-of-contents__link toc-highlight">Setting Up Destination Chain</a><ul><li><a href="#deploy-destination-contracts" class="table-of-contents__link toc-highlight">Deploy Destination Contracts</a></li><li><a href="#configuring-resource-on-bridge" class="table-of-contents__link toc-highlight">Configuring Resource on Bridge</a></li><li><a href="#setting-token-as-mintable-and-burnable-on-bridge" class="table-of-contents__link toc-highlight">Setting Token as Mintable and Burnable on Bridge</a></li><li><a href="#authorizing-handler-to-mint-new-tokens" class="table-of-contents__link toc-highlight">Authorizing Handler to Mint New Tokens</a></li></ul></li><li><a href="#deploy-relayer" class="table-of-contents__link toc-highlight">Deploy Relayer</a><ul><li><a href="#cloning-and-building-relayer" class="table-of-contents__link toc-highlight">Cloning and Building Relayer</a></li><li><a href="#configuring-relayer" class="table-of-contents__link toc-highlight">Configuring Relayer</a></li><li><a href="#set-up-keys" class="table-of-contents__link toc-highlight">Set Up Keys</a></li></ul></li><li><a href="#lets-test-the-bridge" class="table-of-contents__link toc-highlight">Let&#39;s Test the Bridge</a><ul><li><a href="#start-relayer" class="table-of-contents__link toc-highlight">Start Relayer</a></li><li><a href="#approve-handler-to-spend-my-tokens" class="table-of-contents__link toc-highlight">Approve Handler to Spend my Tokens</a></li><li><a href="#deposit-tokens-to-the-bridge" class="table-of-contents__link toc-highlight">Deposit Tokens to the Bridge</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row"><div class="col"><div class="footer-row"><a href="https://subnets.lux.network/" target="_blank" rel="noopener noreferrer" class="footer-main-list"><h3>Explorer</h3></a></div><div class="footer-row"><a href="https://academy.lux.com/?utm_source=dev-docs&amp;utm_medium=website&amp;utm_content=footer" target="_blank" rel="noopener noreferrer" class="footer-main-list"><h3>Academy<!-- --> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" class="footer-academy-cap" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"></path></svg></h3></a></div><div class="footer-row"><a href="https://support.lux.network/en/" target="_blank" rel="noopener noreferrer" class="footer-main-list"><h3>Support</h3></a></div><div class="footer-row"><a href="https://core.app/en/" target="_blank" rel="noopener noreferrer" class="footer-main-list"><h3>Wallet</h3></a></div></div><div class="col"><div class="footer-row"><a href="https://t.me/+KDajA4iToKY2ZjBk"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="footer-social" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.287 5.906c-.778.324-2.334.994-4.666 2.01-.378.15-.577.298-.595.442-.03.243.275.339.69.47l.175.055c.408.133.958.288 1.243.294.26.006.549-.1.868-.32 2.179-1.471 3.304-2.214 3.374-2.23.05-.012.12-.026.166.016.047.041.042.12.037.141-.03.129-1.227 1.241-1.846 1.817-.193.18-.33.307-.358.336a8.154 8.154 0 0 1-.188.186c-.38.366-.664.64.015 1.088.327.216.589.393.85.571.284.194.568.387.936.629.093.06.183.125.27.187.331.236.63.448.997.414.214-.02.435-.22.547-.82.265-1.417.786-4.486.906-5.751a1.426 1.426 0 0 0-.013-.315.337.337 0 0 0-.114-.217.526.526 0 0 0-.31-.093c-.3.005-.763.166-2.984 1.09z"></path></svg></a><a href="https://chat.lux.network/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="footer-social" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"></path></svg></a><a href="https://github.com/luxdefi"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="footer-social" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></a><a href="https://twitter.com/luxdefi"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="footer-social" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"></path></svg></a><a href="https://www.reddit.com/r/Lux/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="footer-social" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M6.167 8a.831.831 0 0 0-.83.83c0 .459.372.84.83.831a.831.831 0 0 0 0-1.661zm1.843 3.647c.315 0 1.403-.038 1.976-.611a.232.232 0 0 0 0-.306.213.213 0 0 0-.306 0c-.353.363-1.126.487-1.67.487-.545 0-1.308-.124-1.671-.487a.213.213 0 0 0-.306 0 .213.213 0 0 0 0 .306c.564.563 1.652.61 1.977.61zm.992-2.807c0 .458.373.83.831.83.458 0 .83-.381.83-.83a.831.831 0 0 0-1.66 0z"></path><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.828-1.165c-.315 0-.602.124-.812.325-.801-.573-1.9-.945-3.121-.993l.534-2.501 1.738.372a.83.83 0 1 0 .83-.869.83.83 0 0 0-.744.468l-1.938-.41a.203.203 0 0 0-.153.028.186.186 0 0 0-.086.134l-.592 2.788c-1.24.038-2.358.41-3.17.992-.21-.2-.496-.324-.81-.324a1.163 1.163 0 0 0-.478 2.224c-.02.115-.029.23-.029.353 0 1.795 2.091 3.256 4.669 3.256 2.577 0 4.668-1.451 4.668-3.256 0-.114-.01-.238-.029-.353.401-.181.688-.592.688-1.069 0-.65-.525-1.165-1.165-1.165z"></path></svg></a><a href="https://www.youtube.com/@Luxlux"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="footer-social" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.007 2.007 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.007 2.007 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31.4 31.4 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.007 2.007 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A99.788 99.788 0 0 1 7.858 2h.193zM6.4 5.209v4.818l4.157-2.408L6.4 5.209z"></path></svg></a><a href="https://www.linkedin.com/company/luxdefi"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="footer-social" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"></path></svg></a><a href="https://www.facebook.com/luxdefi"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="footer-social" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"></path></svg></a></div><div class="row" style="margin-top:10px;max-width:500px"><div class="col"><h4 class="footer-heading">Developers</h4><a href="https://forum.lux.network/"><div class="footer-list">Forum</div></a><a href="https://stats.lux.network/dashboard/overview/"><div class="footer-list">Network Stats</div></a><a href="https://www.youtube.com/playlist?list=PLRHl-ulWK4-GTJhSLF9omG2x_qn7E1O7n"><div class="footer-list">Video Tutorials</div></a><a href="https://hackenproof.com/lux/protocol"><div class="footer-list">Bug Bounty</div></a></div><div class="col"><h4 class="footer-heading">Community</h4><a href="https://medium.com/luxdefi"><div class="footer-list">Medium</div></a><a href="https://www.lux.network/blog"><div class="footer-list">Blog</div></a><a href="https://shop.lux.network/"><div class="footer-list">Merch</div></a><a href="/deprecated/tutorials-contest"><div class="footer-list">Tutorials Contest</div></a></div><div class="col"><h4 class="footer-heading">More</h4><a href="https://www.lux.network/whitepapers"><div class="footer-list">Whitepapers</div></a><a href="https://luxcloud.io/"><div class="footer-list">Enterprise Solutions</div></a><a href="https://github.com/luxdefi/audits"><div class="footer-list">Audits</div></a><a href="https://www.lux.network/legal"><div class="footer-list">Legal</div></a></div></div></div></div><div class="footer__bottom text--center"><div class="footer__copyright" style="font-size:small;padding:15px">Copyright ¬© <!-- -->2023<!-- --> <a href="https://www.lux.network/terms-of-use" class="hover">Lux Partners Limited</a></div></div></div></footer></div>
</body>
</html>
"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9934],{76115:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>l,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var t=i(85893),a=i(11151);const o={tags:["Build","Dapps"],description:"The objective of this document is to provide a brief overview of how to integrate with the EVM-Compatible Lux C-Chain.",sidebar_label:"Exchange Integration",pagination_label:"C-Chain Exchange Integration",sidebar_position:3},r="C-Chain Exchange Integration",s={id:"build/dapp/advanced/integrate-exchange",title:"C-Chain Exchange Integration",description:"The objective of this document is to provide a brief overview of how to integrate with the EVM-Compatible Lux C-Chain.",source:"@site/docs/build/dapp/advanced/integrate-exchange.md",sourceDirName:"build/dapp/advanced",slug:"/build/dapp/advanced/integrate-exchange",permalink:"/build/dapp/advanced/integrate-exchange",draft:!1,unlisted:!1,editUrl:"https://github.com/luxdefi/docs/edit/main/docs/build/dapp/advanced/integrate-exchange.md",tags:[{label:"Build",permalink:"/tags/build"},{label:"Dapps",permalink:"/tags/dapps"}],version:"current",sidebarPosition:3,frontMatter:{tags:["Build","Dapps"],description:"The objective of this document is to provide a brief overview of how to integrate with the EVM-Compatible Lux C-Chain.",sidebar_label:"Exchange Integration",pagination_label:"C-Chain Exchange Integration",sidebar_position:3},sidebar:"build-dapp",previous:{title:"Add Lux Network Programmatically",permalink:"/build/dapp/advanced/add-lux-programmatically"},next:{title:"Testnet Workflow",permalink:"/build/dapp/testnet-workflow"}},d={},c=[{value:"Overview",id:"overview",level:2},{value:"Integration Using EVM Endpoints",id:"integration-using-evm-endpoints",level:2},{value:"Running an Lux Node",id:"running-an-lux-node",level:3},{value:"Configuring an Lux Node",id:"configuring-an-lux-node",level:3},{value:"Interacting with the C-Chain",id:"interacting-with-the-c-chain",level:3},{value:"Integration Using Rosetta",id:"integration-using-rosetta",level:2},{value:"Constructing Transactions",id:"constructing-transactions",level:2},{value:"Ingesting On-Chain Data",id:"ingesting-on-chain-data",level:2},{value:"Determining Finality",id:"determining-finality",level:3},{value:"(Optional) Custom Golang SDK",id:"optional-custom-golang-sdk",level:3},{value:"Support",id:"support",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"c-chain-exchange-integration",children:"C-Chain Exchange Integration"}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:["The objective of this document is to provide a brief overview of how to\nintegrate with the EVM-Compatible Lux C-Chain. For teams that already\nsupport ETH, supporting the C-Chain is as straightforward as spinning up an\nLux node (which has the ",(0,t.jsx)(n.a,{href:"https://eth.wiki/json-rpc/API",children:"same API"})," as\n",(0,t.jsx)(n.a,{href:"https://geth.ethereum.org/docs/rpc/server",children:(0,t.jsx)(n.code,{children:"go-ethereum"})}),") and populating\nLux\u2019s ChainID (43114) when constructing transactions."]}),"\n",(0,t.jsxs)(n.p,{children:["Additionally, Lux Partners maintains an implementation of the ",(0,t.jsx)(n.a,{href:"https://www.rosetta-api.org/",children:"Rosetta\nAPI"})," for the C-Chain called\n",(0,t.jsx)(n.a,{href:"https://github.com/luxdefi/rosetta",children:"rosetta"}),". You can\nlearn more about this standardized integration path on the attached Rosetta API\nwebsite."]}),"\n",(0,t.jsx)(n.h2,{id:"integration-using-evm-endpoints",children:"Integration Using EVM Endpoints"}),"\n",(0,t.jsx)(n.h3,{id:"running-an-lux-node",children:"Running an Lux Node"}),"\n",(0,t.jsxs)(n.p,{children:["If you want to build your node form source or include it in a docker image,\nreference the ",(0,t.jsx)(n.a,{href:"https://github.com/luxdefi/luxd",children:"Luxd GitHub\nrepository"}),". To quickly get up and\nrunning, you can use the ",(0,t.jsx)(n.a,{href:"/nodes/run/with-installer/installing-luxd",children:"node installation script"})," that automates installing\nand updating Luxd node as a ",(0,t.jsx)(n.code,{children:"systemd"})," service on Linux, using prebuilt\nbinaries."]}),"\n",(0,t.jsx)(n.h3,{id:"configuring-an-lux-node",children:"Configuring an Lux Node"}),"\n",(0,t.jsxs)(n.p,{children:["All configuration options and their default values are described ",(0,t.jsx)(n.a,{href:"/nodes/configure/luxd-config-flags",children:"here"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["You can supply configuration options on the command line, or use a config file,\nwhich can be easier to work with when supplying many options. You can specify\nthe config file location with ",(0,t.jsx)(n.code,{children:"\u2014config-file=config.json"}),", where ",(0,t.jsx)(n.code,{children:"config.json"})," is\na JSON file whose keys and values are option names and values."]}),"\n",(0,t.jsxs)(n.p,{children:["Individual chains, including the C-Chain, have their own configuration options\nwhich are separate from the node-level options. These can also be specified in a\nconfig file. For more details, see\n",(0,t.jsx)(n.a,{href:"/nodes/configure/chain-config-flags#c-chain-configs",children:"here"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["The C-Chain config file should be at\n",(0,t.jsx)(n.code,{children:"$HOME/.luxd/configs/chains/C/config.json"}),". You can also tell Luxd\nto look somewhere else for the C-Chain config file with option\n",(0,t.jsx)(n.code,{children:"--chain-config-dir"}),". An example C-Chain config file:"]}),"\n",(0,t.jsx)(n.admonition,{type:"caution",children:(0,t.jsxs)(n.p,{children:["If you need Ethereum ",(0,t.jsx)(n.a,{href:"https://ethereum.org/en/developers/docs/nodes-and-clients/#archive-node",children:"Archive\nNode"}),"\nfunctionality, you need to disable C-Chain pruning, which has been enabled by\ndefault since Luxd v1.4.10. To disable pruning, include\n",(0,t.jsx)(n.code,{children:'"pruning-enabled": false'})," in the C-Chain config file as shown below."]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "snowman-api-enabled": false,\n  "coreth-admin-api-enabled": false,\n  "local-txs-enabled": true,\n  "pruning-enabled": false,\n  "eth-apis": [\n    "internal-eth",\n    "internal-blockchain",\n    "internal-transaction",\n    "internal-tx-pool",\n    "internal-account",\n    "internal-personal",\n    "debug-tracer",\n    "web3",\n    "eth",\n    "eth-filter",\n    "admin",\n    "net"\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"interacting-with-the-c-chain",children:"Interacting with the C-Chain"}),"\n",(0,t.jsxs)(n.p,{children:["Interacting with the C-Chain is identical to interacting with\n",(0,t.jsx)(n.a,{href:"https://geth.ethereum.org/",children:(0,t.jsx)(n.code,{children:"go-ethereum"})}),". You can find the reference material\nfor C-Chain API ",(0,t.jsx)(n.a,{href:"/reference/luxd/c-chain/api",children:"here"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Please note that ",(0,t.jsx)(n.code,{children:"personal_"})," namespace is turned off by default. To turn it on,\nyou need to pass the appropriate command line switch to your node, like in the\nabove config example."]}),"\n",(0,t.jsx)(n.h2,{id:"integration-using-rosetta",children:"Integration Using Rosetta"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://www.rosetta-api.org/",children:"Rosetta"})," is an open-source specification and set\nof tools that makes integrating with different blockchain networks easier by\npresenting the same set of APIs for every network. The Rosetta API is made up of\n2 core components, the ",(0,t.jsx)(n.a,{href:"https://www.rosetta-api.org/docs/data_api_introduction.html",children:"Data\nAPI"})," and the\n",(0,t.jsx)(n.a,{href:"https://www.rosetta-api.org/docs/construction_api_introduction.html",children:"Construction\nAPI"}),".\nTogether, these APIs allow for anyone to read and write to blockchains in a\nstandard format over a standard communication protocol. The specifications for\nthese APIs can be found in the\n",(0,t.jsx)(n.a,{href:"https://github.com/coinbase/rosetta-specifications",children:"rosetta-specifications"}),"\nrepository."]}),"\n",(0,t.jsxs)(n.p,{children:["You can find the Rosetta server implementation for Lux C-Chain\n",(0,t.jsx)(n.a,{href:"https://github.com/luxdefi/rosetta",children:"here"}),", all you need to do is\ninstall and run the server with proper configuration. It comes with a ",(0,t.jsx)(n.code,{children:"Dockerfile"}),"\nthat packages both the server and the Lux client. Detailed instructions\ncan be found in the linked repository."]}),"\n",(0,t.jsx)(n.h2,{id:"constructing-transactions",children:"Constructing Transactions"}),"\n",(0,t.jsx)(n.p,{children:"Lux C-Chain transactions are identical to standard EVM transactions with 2 exceptions:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"They must be signed with Lux\u2019s ChainID (43114)."}),"\n",(0,t.jsxs)(n.li,{children:["The detailed dynamic gas fee can be found ",(0,t.jsx)(n.a,{href:"/reference/standards/guides/txn-fees#c-chain-fees",children:"here"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"For development purposes, Lux supports all the popular tooling for\nEthereum, so developers familiar with Ethereum and Solidity can feel right at\nhome. We have tutorials and repositories for several popular development\nenvironments:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/build/dapp/smart-contracts/remix-deploy",children:"Core and Remix"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/build/dapp/smart-contracts/toolchains/thirdweb",children:"thirdweb"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/build/dapp/smart-contracts/toolchains/hardhat",children:"Hardhat"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"ingesting-on-chain-data",children:"Ingesting On-Chain Data"}),"\n",(0,t.jsx)(n.p,{children:"You can use any standard way of ingesting on-chain data you use for Ethereum network."}),"\n",(0,t.jsx)(n.h3,{id:"determining-finality",children:"Determining Finality"}),"\n",(0,t.jsxs)(n.p,{children:["Lux consensus provides fast and irreversible finality with 1-2 seconds. To\nquery the most up-to-date finalized block, query any value (that is block, balance,\nstate, etc) with the ",(0,t.jsx)(n.code,{children:"latest"})," parameter. If you query above the last finalized\nblock (that is eth_blockNumber returns 10 and you query 11), an error will be\nthrown indicating that unfinalized data cannot be queried (as of\n",(0,t.jsx)(n.code,{children:"luxd@v1.3.2"}),")."]}),"\n",(0,t.jsx)(n.h3,{id:"optional-custom-golang-sdk",children:"(Optional) Custom Golang SDK"}),"\n",(0,t.jsxs)(n.p,{children:["If you plan on extracting data from the C-Chain into your own systems using\nGolang, we recommend using our custom\n",(0,t.jsx)(n.a,{href:"https://github.com/luxdefi/coreth/tree/master/ethclient",children:(0,t.jsx)(n.code,{children:"ethclient"})}),". The\nstandard ",(0,t.jsx)(n.code,{children:"go-ethereum"})," Ethereum client does not compute block hashes correctly\n(when you call ",(0,t.jsx)(n.code,{children:"block.Hash()"}),") because it doesn't take into account the added\n",(0,t.jsx)(n.a,{href:"https://github.com/luxdefi/coreth/blob/2c3cfac5f766ce5f32a2eddc43451bdb473b84f1/core/types/block.go#L98",children:"ExtDataHash"}),"\nheader field in Lux C-Chain blocks, which is used move LUX between chains\n(X-Chain and P-Chain). You can read more about our multi-chain abstraction\n",(0,t.jsx)(n.a,{href:"/learn/lux/lux-platform",children:"here"})," (out of scope for a\nnormal C-Chain integration)."]}),"\n",(0,t.jsx)(n.p,{children:"If you plan on reading JSON responses directly or use web3.js (doesn't recompute\nhash received over the wire) to extract on-chain transaction data/logs/receipts,\nyou shouldn't have any issues!"}),"\n",(0,t.jsx)(n.h2,{id:"support",children:"Support"}),"\n",(0,t.jsxs)(n.p,{children:["If you have any problems or questions, reach out either directly to our\ndevelopers, or on our public ",(0,t.jsx)(n.a,{href:"https://chat.lux.network/",children:"Discord"})," server."]})]})}function l(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>s,a:()=>r});var t=i(67294);const a={},o=t.createContext(a);function r(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);
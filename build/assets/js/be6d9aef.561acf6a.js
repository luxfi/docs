"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6962],{42176:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>l,frontMatter:()=>a,metadata:()=>o,toc:()=>h});var s=n(85893),i=n(11151);const a={tags:["Tooling","LuxJS"],description:"LuxJS is a JavaScript Library for interfacing with the Lux platform. It is built using TypeScript and intended to support both browser and Node.js. The LuxJS library allows one to issue commands to the Lux node APIs.",pagination_label:"Create an Asset on the X-Chain",sidebar_label:"Create X-Chain Asset",sidebar_position:4},r="Create an Asset on the X-Chain",o={id:"tooling/luxjs-guides/create-an-asset-on-the-x-chain",title:"Create an Asset on the X-Chain",description:"LuxJS is a JavaScript Library for interfacing with the Lux platform. It is built using TypeScript and intended to support both browser and Node.js. The LuxJS library allows one to issue commands to the Lux node APIs.",source:"@site/docs/tooling/luxjs-guides/create-an-asset-on-the-x-chain.md",sourceDirName:"tooling/luxjs-guides",slug:"/tooling/luxjs-guides/create-an-asset-on-the-x-chain",permalink:"/tooling/luxjs-guides/create-an-asset-on-the-x-chain",draft:!1,unlisted:!1,editUrl:"https://github.com/luxdefi/docs/edit/master/docs/tooling/luxjs-guides/create-an-asset-on-the-x-chain.md",tags:[{label:"Tooling",permalink:"/tags/tooling"},{label:"LuxJS",permalink:"/tags/lux-js"}],version:"current",sidebarPosition:4,frontMatter:{tags:["Tooling","LuxJS"],description:"LuxJS is a JavaScript Library for interfacing with the Lux platform. It is built using TypeScript and intended to support both browser and Node.js. The LuxJS library allows one to issue commands to the Lux node APIs.",pagination_label:"Create an Asset on the X-Chain",sidebar_label:"Create X-Chain Asset",sidebar_position:4},sidebar:"tooling",previous:{title:"Transfer LUX Tokens Between Chains",permalink:"/tooling/luxjs-guides/cross-chain-transfers"},next:{title:"Send an Asset on the X-Chain",permalink:"/tooling/luxjs-guides/send-an-asset-on-the-x-chain"}},c={},h=[{value:"Import the Local Network&#39;s Pre-funded Address",id:"import-the-local-networks-pre-funded-address",level:2},{value:"Prepare for the Mint Output",id:"prepare-for-the-mint-output",level:2},{value:"Describe the New Asset",id:"describe-the-new-asset",level:2},{value:"Set Up Async / Await",id:"set-up-async--await",level:2},{value:"Fetch the UTXO",id:"fetch-the-utxo",level:2},{value:"Creating the Initial State",id:"creating-the-initial-state",level:2},{value:"Create the Mint Output",id:"create-the-mint-output",level:2},{value:"Creating the Signed Transaction",id:"creating-the-signed-transaction",level:2},{value:"Sign and Issue the Transaction",id:"sign-and-issue-the-transaction",level:2},{value:"Get the Status of the Transaction",id:"get-the-status-of-the-transaction",level:2},{value:"Identifying the Newly Created Asset",id:"identifying-the-newly-created-asset",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"create-an-asset-on-the-x-chain",children:"Create an Asset on the X-Chain"}),"\n",(0,s.jsxs)(t.p,{children:["This example creates an asset on the X-Chain and publishes it to the Lux\nplatform. The first step in this process is to create an instance of LuxJS\nconnected to our Lux platform endpoint of choice. In this example we're\nusing the local network ",(0,s.jsx)(t.code,{children:"12345"})," via ",(0,s.jsx)(t.a,{href:"/tooling/netrunner",children:"Lux Netrunner"}),". The code examples are written in\ntypescript. The script is in full, in both typescript and JavaScript, after the\nindividual steps. The whole example can be found\n",(0,s.jsx)(t.a,{href:"https://github.com/luxdefi/luxjs/blob/master/examples/avm/buildCreateAssetTx.ts",children:"here"}),"."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'import { Lux, BN, Buffer } from "lux";\nimport {\n  AVMAPI,\n  KeyChain,\n  UTXOSet,\n  UnsignedTx,\n  Tx,\n  InitialStates,\n  SECPMintOutput,\n  SECPTransferOutput,\n} from "lux/dist/apis/avm";\nimport {\n  PrivateKeyPrefix,\n  DefaultLocalGenesisPrivateKey,\n} from "lux/dist/utils";\n\nconst ip: string = "localhost";\nconst port: number = 9650;\nconst protocol: string = "http";\nconst networkID: number = 12345; // Default is 1, we want to override that for our local network\nconst lux: Lux = new Lux(ip, port, protocol, networkID);\n'})}),"\n",(0,s.jsx)(t.h2,{id:"import-the-local-networks-pre-funded-address",children:"Import the Local Network's Pre-funded Address"}),"\n",(0,s.jsxs)(t.p,{children:["Next we get an instance of the X-Chain local keychain. The local network ",(0,s.jsx)(t.code,{children:"12345"}),"\nhas a pre-funded address which you can access with the private key\n",(0,s.jsx)(t.code,{children:"PrivateKey-ewoqjP7PxY4yr3iLTpLisriqt94hdyDFNgchSxGGztUrTXtNN"})," which can be\nreferenced from ",(0,s.jsx)(t.code,{children:"${PrivateKeyPrefix}${DefaultLocalGenesisPrivateKey}"}),". Lastly\nget the pre-funded address as a ",(0,s.jsx)(t.code,{children:"Buffer"})," and as a ",(0,s.jsx)(t.code,{children:"string"}),"."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"const xchain: AVMAPI = lux.XChain();\nconst xKeychain: KeyChain = xchain.keyChain();\nconst privKey: string = `${PrivateKeyPrefix}${DefaultLocalGenesisPrivateKey}`;\nxKeychain.importKey(privKey);\nconst xAddresses: Buffer[] = xchain.keyChain().getAddresses();\nconst xAddressStrings: string[] = xchain.keyChain().getAddressStrings();\n"})}),"\n",(0,s.jsx)(t.h2,{id:"prepare-for-the-mint-output",children:"Prepare for the Mint Output"}),"\n",(0,s.jsxs)(t.p,{children:["Now we need to create an empty array for the ",(0,s.jsx)(t.code,{children:"SECPMintOutput"}),". We also need a\n",(0,s.jsx)(t.code,{children:"threshold"})," and ",(0,s.jsx)(t.code,{children:"locktime"})," for the outputs which we're going to create. Each\nX-Chain transaction can contain a ",(0,s.jsx)(t.code,{children:"memo"})," field of up to 256 bytes of\narbitrary data."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'const outputs: SECPMintOutput[] = [];\nconst threshold: number = 1;\nconst locktime: BN = new BN(0);\nconst memo: Buffer = Buffer.from(\n  "AVM utility method buildCreateAssetTx to create an ANT"\n);\n'})}),"\n",(0,s.jsx)(t.h2,{id:"describe-the-new-asset",children:"Describe the New Asset"}),"\n",(0,s.jsx)(t.p,{children:"The first step in creating a new asset using LuxJS is to determine the\nqualities of the asset. We will give the asset a name, a ticker symbol, as well\nas a denomination."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'const name: string = "TestToken";\nconst symbol: string = "TEST";\nconst denomination: number = 3;\n'})}),"\n",(0,s.jsx)(t.h2,{id:"set-up-async--await",children:"Set Up Async / Await"}),"\n",(0,s.jsxs)(t.p,{children:["The remaining code will be encapsulated by this ",(0,s.jsx)(t.code,{children:"main"})," function so that we can\nuse the ",(0,s.jsx)(t.code,{children:"async"})," / ",(0,s.jsx)(t.code,{children:"await"})," pattern."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"const main = async (): Promise<any> => {};\nmain();\n"})}),"\n",(0,s.jsx)(t.h2,{id:"fetch-the-utxo",children:"Fetch the UTXO"}),"\n",(0,s.jsxs)(t.p,{children:["Pass the ",(0,s.jsx)(t.code,{children:"xAddressStrings"})," to ",(0,s.jsx)(t.code,{children:"xchain.getUTXOs"})," to fetch the UTXO."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"const avmUTXOResponse: any = await xchain.getUTXOs(xAddressStrings);\nconst utxoSet: UTXOSet = avmUTXOResponse.utxos;\n"})}),"\n",(0,s.jsx)(t.h2,{id:"creating-the-initial-state",children:"Creating the Initial State"}),"\n",(0,s.jsx)(t.p,{children:"We want to mint an asset with 507 units held by the managed key. This sets up\nthe state that will result from the Create Asset transaction."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"// Create outputs for the asset's initial state\nconst amount: BN = new BN(507);\nconst vcapSecpOutput: SECPTransferOutput = new SECPTransferOutput(\n  amount,\n  xAddresses,\n  locktime,\n  threshold\n);\nconst initialStates: InitialStates = new InitialStates();\n\n// Populate the initialStates with the outputs\ninitialStates.addOutput(vcapSecpOutput);\n"})}),"\n",(0,s.jsx)(t.h2,{id:"create-the-mint-output",children:"Create the Mint Output"}),"\n",(0,s.jsxs)(t.p,{children:["We also want to create a ",(0,s.jsx)(t.code,{children:"SECPMintOutput"})," so that we can mint more of this asset later."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"const secpMintOutput: SECPMintOutput = new SECPMintOutput(\n  xAddresses,\n  locktime,\n  threshold\n);\noutputs.push(secpMintOutput);\n"})}),"\n",(0,s.jsx)(t.h2,{id:"creating-the-signed-transaction",children:"Creating the Signed Transaction"}),"\n",(0,s.jsxs)(t.p,{children:["Now that we know what we want an asset to look like, we create a transaction to\nsend to the network. There is an AVM helper function ",(0,s.jsx)(t.code,{children:"buildCreateAssetTx()"}),"\nwhich does just that."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"const unsignedTx: UnsignedTx = await xchain.buildCreateAssetTx(\n  utxoSet,\n  xAddressStrings,\n  xAddressStrings,\n  initialStates,\n  name,\n  symbol,\n  denomination,\n  outputs,\n  memo\n);\n"})}),"\n",(0,s.jsx)(t.h2,{id:"sign-and-issue-the-transaction",children:"Sign and Issue the Transaction"}),"\n",(0,s.jsxs)(t.p,{children:["Now let's sign the transaction and issue it to the Lux network. If\nsuccessful it will return a\n",(0,s.jsx)(t.a,{href:"http://support.lux.network/en/articles/4587395-what-is-cb58",children:"CB58"})," serialized\nstring for the transaction ID."]}),"\n",(0,s.jsx)(t.p,{children:"Now that we have a signed transaction ready to send to the network, let\u2019s issue it!"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"const tx: Tx = unsignedTx.sign(xKeychain);\nconst txid: string = await xchain.issueTx(tx);\nconsole.log(`Success! TXID: ${txid}`);\n"})}),"\n",(0,s.jsx)(t.h2,{id:"get-the-status-of-the-transaction",children:"Get the Status of the Transaction"}),"\n",(0,s.jsx)(t.p,{children:"Now that we sent the transaction to the network, it takes a few seconds to\ndetermine if the transaction has gone through. We can get an updated status on\nthe transaction using the transaction ID through the AVM API."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'// returns one of: "Accepted", "Processing", "Unknown", and "Rejected"\nconst status: string = await xchain.getTxStatus(id);\n'})}),"\n",(0,s.jsxs)(t.p,{children:["The statuses can be one of ",(0,s.jsx)(t.code,{children:"Accepted"}),", ",(0,s.jsx)(t.code,{children:"Processing"}),", ",(0,s.jsx)(t.code,{children:"Unknown"}),", and ",(0,s.jsx)(t.code,{children:"Rejected"})]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:'"Accepted" indicates that the transaction has been accepted as valid by the network and executed'}),"\n",(0,s.jsx)(t.li,{children:'"Processing" indicates that the transaction is being voted on.'}),"\n",(0,s.jsx)(t.li,{children:'"Unknown" indicates that node knows nothing about the transaction, indicating\nthe node doesn\u2019t have it'}),"\n",(0,s.jsx)(t.li,{children:'"Rejected" indicates the node knows about the transaction, but it conflicted with an accepted transaction'}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"identifying-the-newly-created-asset",children:"Identifying the Newly Created Asset"}),"\n",(0,s.jsx)(t.p,{children:'The X-Chain uses the transaction ID of the transaction which created the asset\nas the unique identifier for the asset. This unique identifier is henceforth\nknown as the "AssetID" of the asset. When assets are traded around the X-Chain,\nthey always reference the AssetID that they represent.'})]})}function l(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},11151:(e,t,n)=>{n.d(t,{Z:()=>o,a:()=>r});var s=n(67294);const i={},a=s.createContext(i);function r(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);
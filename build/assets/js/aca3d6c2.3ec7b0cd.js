"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3674],{52742:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>d});var t=i(85893),a=i(11151);const s={tags:["Nodes"],description:"In this tutorial, you'll learn about advanced Lux node configuration options and maintenance tasks.",sidebar_label:"Node Config and Maintenance",sidebar_position:3},o="Node Configuration and Maintenance",l={id:"nodes/run/with-installer/advance-config-maintenance",title:"Node Configuration and Maintenance",description:"In this tutorial, you'll learn about advanced Lux node configuration options and maintenance tasks.",source:"@site/docs/nodes/run/with-installer/advance-config-maintenance.md",sourceDirName:"nodes/run/with-installer",slug:"/nodes/run/with-installer/advance-config-maintenance",permalink:"/nodes/run/with-installer/advance-config-maintenance",draft:!1,unlisted:!1,editUrl:"https://github.com/luxdefi/docs/edit/master/docs/nodes/run/with-installer/advance-config-maintenance.md",tags:[{label:"Nodes",permalink:"/tags/nodes"}],version:"current",sidebarPosition:3,frontMatter:{tags:["Nodes"],description:"In this tutorial, you'll learn about advanced Lux node configuration options and maintenance tasks.",sidebar_label:"Node Config and Maintenance",sidebar_position:3},sidebar:"nodes",previous:{title:"Managing Luxd",permalink:"/nodes/run/with-installer/managing-luxd"},next:{title:"Run a Subnet Node",permalink:"/nodes/run/subnet-node"}},r={},d=[{value:"Advanced Node Configuration",id:"advanced-node-configuration",level:2},{value:"Unattended Installation",id:"unattended-installation",level:3},{value:"Usage Examples",id:"usage-examples",level:3},{value:"Node Configuration",id:"node-configuration",level:2},{value:"Using a Previous Version",id:"using-a-previous-version",level:2},{value:"Reinstall and Script Update",id:"reinstall-and-script-update",level:2},{value:"Removing the Node Installation",id:"removing-the-node-installation",level:2},{value:"What Next?",id:"what-next",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"node-configuration-and-maintenance",children:"Node Configuration and Maintenance"}),"\n",(0,t.jsx)(n.h2,{id:"advanced-node-configuration",children:"Advanced Node Configuration"}),"\n",(0,t.jsx)(n.p,{children:"Without any additional arguments, the script installs the node in a most common\nconfiguration. But the script also enables various advanced options to be\nconfigured, via the command line prompts. Following is a list of advanced\noptions and their usage:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"admin"})," - ",(0,t.jsx)(n.a,{href:"/reference/luxd/admin-api",children:"Admin API"})," will be enabled"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"archival"})," - disables database pruning and preserves the complete transaction history"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"state-sync"})," - if ",(0,t.jsx)(n.code,{children:"on"})," state-sync for the C-Chain is used, if ",(0,t.jsx)(n.code,{children:"off"})," it will\nuse regular transaction replay to bootstrap; state-sync is much faster, but\nhas no historical data"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"db-dir"})," - use to provide the full path to the location where the database\nwill be stored"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"testnet"})," - node will connect to Testnet instead of the Mainnet"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"index"})," - ",(0,t.jsx)(n.a,{href:"/reference/luxd/index-api",children:"Index API"})," will be\nenabled"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ip"})," - use ",(0,t.jsx)(n.code,{children:"dynamic"}),", ",(0,t.jsx)(n.code,{children:"static"})," arguments, of enter a desired IP directly to be\nused as the public IP node will advertise to the network"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"rpc"})," - use ",(0,t.jsx)(n.code,{children:"any"})," or ",(0,t.jsx)(n.code,{children:"local"})," argument to select any or local network interface\nto be used to listen for RPC calls"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"version"})," - install a specific node version, instead of the latest. See\n",(0,t.jsx)(n.a,{href:"#using-a-previous-version",children:"here"})," for usage."]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Configuring the ",(0,t.jsx)(n.code,{children:"index"})," and ",(0,t.jsx)(n.code,{children:"archival"})," options on an existing node\nwill require a fresh bootstrap to recreate the database."]})}),"\n",(0,t.jsx)(n.p,{children:"Complete script usage can be displayed by entering:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./luxd-installer.sh --help\n"})}),"\n",(0,t.jsx)(n.h3,{id:"unattended-installation",children:"Unattended Installation"}),"\n",(0,t.jsxs)(n.p,{children:["If you want to use the script in an automated environment where you cannot enter\nthe data at the prompts you must provide at least the ",(0,t.jsx)(n.code,{children:"rpc"})," and ",(0,t.jsx)(n.code,{children:"ip"})," options.\nFor example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./luxd-installer.sh --ip 1.2.3.4 --rpc local\n"})}),"\n",(0,t.jsx)(n.h3,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"To run a Testnet node with indexing enabled and autodetected static IP:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./luxd-installer.sh --testnet --ip static --index\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["To run an archival Mainnet node with dynamic IP and database located at ",(0,t.jsx)(n.code,{children:"/home/node/db"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./luxd-installer.sh --archival --ip dynamic --db-dir /home/node/db\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"To use C-Chain state-sync to quickly bootstrap a Mainnet node, with dynamic IP and local RPC only:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./luxd-installer.sh --state-sync on --ip dynamic --rpc local\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"To reinstall the node using node version 1.7.10 and use specific IP and local RPC only:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./luxd-installer.sh --reinstall --ip 1.2.3.4 --version v1.7.10 --rpc local\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"node-configuration",children:"Node Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["The file that configures node operation is ",(0,t.jsx)(n.code,{children:"~/.luxd/configs/node.json"}),". You\ncan edit it to add or change configuration options. The documentation of\nconfiguration options can be found\n",(0,t.jsx)(n.a,{href:"/nodes/configure/luxd-config-flags",children:"here"}),". Configuration may look like\nthis:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "public-ip-resolution-service": "opendns",\n  "http-host": ""\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Note that the configuration file needs to be a properly formatted ",(0,t.jsx)(n.code,{children:"JSON"})," file, so\nswitches should formatted differently than they would be for the command line.\nTherefore, don't enter options like ",(0,t.jsx)(n.code,{children:"--public-ip-resolution-service=opendns"})," as shown\nin the example above."]}),"\n",(0,t.jsxs)(n.p,{children:["The script also creates an empty C-Chain config file, located at\n",(0,t.jsx)(n.code,{children:"~/.luxd/configs/chains/C/config.json"}),". By editing that file, you can\nconfigure the C-Chain, as described in detail\n",(0,t.jsx)(n.a,{href:"/nodes/configure/chain-config-flags",children:"here"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"using-a-previous-version",children:"Using a Previous Version"}),"\n",(0,t.jsx)(n.p,{children:"The installer script can also be used to install a version of Luxd other than the latest\nversion."}),"\n",(0,t.jsx)(n.p,{children:"To see a list of available versions for installation, run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./luxd-installer.sh --list\n"})}),"\n",(0,t.jsx)(n.p,{children:"It will print out a list, something like:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"Luxd installer\n---------------------\nAvailable versions:\nv1.3.2\nv1.3.1\nv1.3.0\nv1.2.4-arm-fix\nv1.2.4\nv1.2.3-signed\nv1.2.3\nv1.2.2\nv1.2.1\nv1.2.0\n"})}),"\n",(0,t.jsxs)(n.p,{children:["To install a specific version, run the script with ",(0,t.jsx)(n.code,{children:"--version"})," followed by the\ntag of the version. For example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./luxd-installer.sh --version v1.3.1\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"danger",children:(0,t.jsx)(n.p,{children:"Note that not all Luxd versions are compatible. You should generally run\nthe latest version. Running a version other than latest may lead to your node\nnot working properly and, for validators, not receiving a staking reward."})}),"\n",(0,t.jsxs)(n.p,{children:["Thanks to community member ",(0,t.jsx)(n.a,{href:"https://github.com/jzu",children:"Jean Zundel"})," for the\ninspiration and help implementing support for installing non-latest node\nversions."]}),"\n",(0,t.jsx)(n.h2,{id:"reinstall-and-script-update",children:"Reinstall and Script Update"}),"\n",(0,t.jsx)(n.p,{children:"The installer script gets updated from time to time, with new features and\ncapabilities added. To take advantage of new features or to recover from\nmodifications that made the node fail, you may want to reinstall the node. To do\nthat, fetch the latest version of the script from the web with:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"wget -nd -m https://raw.githubusercontent.com/luxdefi/docs/master/scripts/luxd-installer.sh\n"})}),"\n",(0,t.jsxs)(n.p,{children:["After the script has updated, run it again with the ",(0,t.jsx)(n.code,{children:"--reinstall"})," config flag:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./luxd-installer.sh --reinstall\n"})}),"\n",(0,t.jsx)(n.p,{children:"This will delete the existing service file, and run the installer from scratch,\nlike it was started for the first time. Note that the database and NodeID will\nbe left intact."}),"\n",(0,t.jsx)(n.h2,{id:"removing-the-node-installation",children:"Removing the Node Installation"}),"\n",(0,t.jsxs)(n.p,{children:["If you want to remove the node installation from the machine, you can run the\nscript with the ",(0,t.jsx)(n.code,{children:"--remove"})," option, like this:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./luxd-installer.sh --remove\n"})}),"\n",(0,t.jsx)(n.p,{children:"This will remove the service, service definition file and node binaries. It will\nnot remove the working directory, node ID definition or the node database. To\nremove those as well, you can type:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"rm -rf ~/.luxd/\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsx)(n.p,{children:"Please note that this is irreversible and the database and node ID will be deleted!"})}),"\n",(0,t.jsx)(n.h2,{id:"what-next",children:"What Next?"}),"\n",(0,t.jsxs)(n.p,{children:["That's it, you're running an Luxd node! Congratulations! Let us know you\ndid it on our ",(0,t.jsx)(n.a,{href:"https://twitter.com/luxlux",children:"Twitter"}),",\n",(0,t.jsx)(n.a,{href:"https://t.me/luxlux",children:"Telegram"})," or ",(0,t.jsx)(n.a,{href:"https://t.me/luxlux",children:"Reddit"}),"!"]}),"\n",(0,t.jsx)(n.p,{children:"If you're on a residential network (dynamic IP), don't forget to set up port\nforwarding. If you're on a cloud service provider, you're good to go."}),"\n",(0,t.jsxs)(n.p,{children:["Now you can ",(0,t.jsx)(n.a,{href:"/reference/standards/guides/issuing-api-calls",children:"interact with your node"}),",\n",(0,t.jsx)(n.a,{href:"/nodes/validate/what-is-staking",children:"stake your tokens"}),", or level up your installation by setting up\n",(0,t.jsx)(n.a,{href:"/nodes/maintain/setting-up-node-monitoring",children:"node monitoring"})," to get a better\ninsight into what your node is doing. Also, you might want to use our ",(0,t.jsx)(n.a,{href:"/tooling/luxd-postman-collection/setup",children:"Postman Collection"})," to more\neasily issue commands to your node."]}),"\n",(0,t.jsxs)(n.p,{children:["Finally, if you haven't already, it is a good idea to\n",(0,t.jsx)(n.a,{href:"/nodes/maintain/node-backup-and-restore",children:"back up"})," important files in case you ever\nneed to restore your node to a different machine."]}),"\n",(0,t.jsxs)(n.p,{children:["If you have any questions, or need help, feel free to contact us on our\n",(0,t.jsx)(n.a,{href:"https://chat.lux.network/",children:"Discord"})," server."]})]})}function h(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>l,a:()=>o});var t=i(67294);const a={},s=t.createContext(a);function o(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);
<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-build/vm/evm/defining-precompile" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">Defining Your Precompile | Lux Network Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:image" content="https://docs.lux.network/img/Lux-OG-Image.png?force-reload-1"><meta data-rh="true" name="twitter:image" content="https://docs.lux.network/img/Lux-OG-Image.png?force-reload-1"><meta data-rh="true" property="og:url" content="https://docs.lux.network/docs/build/vm/evm/defining-precompile"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:description" content="The fastest, most reliable smart contracts platform in the world. Build anything you want, any way you want, on the eco-friendly blockchain designed for Web3 devs."><meta data-rh="true" name="twitter:title" content="Lux Network Docs: Create Without Limits"><meta data-rh="true" name="keywords" content="Lux Network Docs: Create Without Limits"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Defining Your Precompile | Lux Network Docs"><meta data-rh="true" name="description" content="In this guide, we&#x27;ll define the precompile by implementing the `HelloWorld` interface."><meta data-rh="true" property="og:description" content="In this guide, we&#x27;ll define the precompile by implementing the `HelloWorld` interface."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.lux.network/docs/build/vm/evm/defining-precompile"><link data-rh="true" rel="alternate" href="https://docs.lux.network/docs/build/vm/evm/defining-precompile" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://docs.lux.network/docs/build/vm/evm/defining-precompile" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://4842GXJR5Q-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-PLV38BFX",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>


<link rel="search" type="application/opensearchdescription+xml" title="Lux Network Docs" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.c0051d81.css">
<script src="/assets/js/runtime~main.df23feb1.js" defer="defer"></script>
<script src="/assets/js/main.2bdccb41.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PLV38BFX" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_W7Pl" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/lux-logo-white.png" alt="Lux Logo" class="themedComponent_MsLv themedComponent--light_Tu5Z"><img src="/img/lux-logo-white.png" alt="Lux Logo" class="themedComponent_MsLv themedComponent--dark_kALa"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/intro">Learn</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Build</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/build/dapp">Dapps</a></li><li><a class="dropdown__link" href="/docs/build/subnet">Subnets</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/build/vm">Virtual Machines</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/nodes">Nodes</a><a class="navbar__item navbar__link" href="/docs/tooling">Tooling</a><a class="navbar__item navbar__link" href="/docs/reference">Reference</a></div><div class="navbar__items navbar__items--right"><div class="toggle_J3Rz colorModeToggle_G6as"><button class="clean-btn toggleButton_syTT toggleButtonDisabled_YSjw" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_Df_j"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_TcbO"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer__CWv"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper__mvV"><div class="docsWrapper_gkkA"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_wR0P" type="button"></button><div class="docRoot_Flpe"><aside class="theme-doc-sidebar-container docSidebarContainer_PsGA"><div class="sidebarViewport_elDr"><div class="sidebar_mXEi"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_a9XK"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><span class="menu__item"><b><medium> â–¼ Virtual Machines </medium></b></span></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/build/vm">ðŸ”— Quick Links</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/build/vm/intro">Introduction to VMs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><span class="menu__item"><b><medium> Create a VM </medium></b></span></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/build/vm/create/any-lang-vm">Simple VM in Any Language</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/build/vm/create/golang-vm-simple">Simple Golang VM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/build/vm/create/golang-vm-complex">Complex Golang VM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/build/vm/create/rust-vm">Rust VM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><span class="menu__item"><b><medium> EVM Customization </medium></b></span></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/build/vm/evm/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/build/vm/evm/background-and-reqs">Background and Requirements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/build/vm/evm/generate-precompile">Generating Your Precompile</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/build/vm/evm/defining-precompile">Defining Your Precompile</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/build/vm/evm/defining-tests">Writing Test Cases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/build/vm/evm/executing-tests">Executing Your Test Cases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/build/vm/evm/deploying-precompile">Deploying Your Precompile</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tooling/plugin-manager">ðŸ“Ž Manage VM Binaries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/luxfi/hypersdk#readme" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink__95z">LuxSDK<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_bHDC"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_mbLL"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_UmVr"><div class="docItemContainer_ZQ6k"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_a7jg" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_XFa_"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Defining Your Precompile</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_G0g8 theme-doc-toc-mobile tocMobile_GQHQ"><button type="button" class="clean-btn tocCollapsibleButton_BClo">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Defining Your Precompile</h1>
<!-- -->
<p>Now that we have autogenerated the template code required for our precompile, let&#x27;s actually write the logic for the precompile itself.</p>
<h2 class="anchor anchorWithStickyNavbar_lBvC" id="setting-config-key">Setting Config Key<a href="#setting-config-key" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2>
<p>Let&#x27;s jump to <code>helloworld/module.go</code> file first. This file contains the module definition for our
precompile. You can see the <code>ConfigKey</code> is set to some default value of <code>helloWorldConfig</code>.
This key should be unique to the precompile.
This config key determines which JSON key to use when reading the precompile&#x27;s config from the
JSON upgrade/genesis file. In this case, the config key is <code>helloWorldConfig</code> and the JSON config
should look like this:</p>
<div class="language-json codeBlockContainer_hIkJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_lj6G"><pre tabindex="0" class="prism-code language-json codeBlock_shPM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_GuLG"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;helloWorldConfig&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;blockTimestamp&quot;: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_UauG"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_N3nO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_OX13"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hEg0"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_lBvC" id="setting-contract-address">Setting Contract Address<a href="#setting-contract-address" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2>
<p>In the <code>helloworld/module.go</code> you can see the <code>ContractAddress</code> is set to some default value.
This should be changed to a suitable address for your precompile.
The address should be unique to the precompile. There is a registry of precompile addresses
under <a href="https://github.com/luxfi/subnet-evm/blob/helloworld-official-tutorial-v2/precompile/registry/registry.go" target="_blank" rel="noopener noreferrer"><code>precompile/registry/registry.go</code></a>.
A list of addresses is specified in the comments under this file.
Modify the default value to be the next user available stateful precompile address. For forks of
Subnet-EVM or Precompile-EVM, users should start at <code>0x0300000000000000000000000000000000000000</code> to ensure
that their own modifications do not conflict with stateful precompiles that may be added to
Subnet-EVM in the future. You should pick an address that is not already taken.</p>
<div class="language-go codeBlockContainer_hIkJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_lj6G"><pre tabindex="0" class="prism-code language-go codeBlock_shPM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_GuLG"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// This list is kept just for reference. The actual addresses defined in respective packages of precompiles.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Note: it is important that none of these addresses conflict with each other or any other precompiles</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// in core/vm/contracts.go.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// The first stateful precompiles were added in coreth to support nativeAssetCall and nativeAssetBalance. New stateful precompiles</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// originating in coreth will continue at this prefix, so we reserve this range in subnet-evm so that they can be migrated into</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// subnet-evm without issue.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// These start at the address: 0x0100000000000000000000000000000000000000 and will increment by 1.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Optional precompiles implemented in subnet-evm start at 0x0200000000000000000000000000000000000000 and will increment by 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// from here to reduce the risk of conflicts.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// For forks of subnet-evm, users should start at 0x0300000000000000000000000000000000000000 to ensure</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// that their own modifications do not conflict with stateful precompiles that may be added to subnet-evm</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// in the future.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ContractDeployerAllowListAddress = common.HexToAddress(&quot;0x0200000000000000000000000000000000000000&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ContractNativeMinterAddress      = common.HexToAddress(&quot;0x0200000000000000000000000000000000000001&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// TxAllowListAddress               = common.HexToAddress(&quot;0x0200000000000000000000000000000000000002&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// FeeManagerAddress                = common.HexToAddress(&quot;0x0200000000000000000000000000000000000003&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// RewardManagerAddress             = common.HexToAddress(&quot;0x0200000000000000000000000000000000000004&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// HelloWorldAddress                = common.HexToAddress(&quot;0x0300000000000000000000000000000000000000&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ADD YOUR PRECOMPILE HERE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// {YourPrecompile}Address          = common.HexToAddress(&quot;0x03000000000000000000000000000000000000??&quot;)</span><br></span></code></pre><div class="buttonGroup_UauG"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_N3nO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_OX13"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hEg0"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Don&#x27;t forget to update the actual variable <code>ContractAddress</code> in <code>module.go</code> to the address you chose.
It should look like this:</p>
<div class="language-go codeBlockContainer_hIkJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_lj6G"><pre tabindex="0" class="prism-code language-go codeBlock_shPM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_GuLG"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ContractAddress is the defined address of the precompile contract.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// This should be unique across all precompile contracts.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// See params/precompile_modules.go for registered precompile contracts and more information.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> ContractAddress </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">HexToAddress</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;0x0300000000000000000000000000000000000000&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_UauG"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_N3nO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_OX13"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hEg0"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now when Subnet-EVM sees the <code>helloworld.ContractAddress</code> as input when executing
<a href="https://github.com/luxfi/subnet-evm/blob/helloworld-official-tutorial-v2/core/vm/evm.go#L284" target="_blank" rel="noopener noreferrer"><code>CALL</code></a>,
<a href="https://github.com/luxfi/subnet-evm/blob/helloworld-official-tutorial-v2/core/vm/evm.go#L355" target="_blank" rel="noopener noreferrer"><code>CALLCODE</code></a>,
<a href="https://github.com/luxfi/subnet-evm/blob/helloworld-official-tutorial-v2/core/vm/evm.go#L396" target="_blank" rel="noopener noreferrer"><code>DELEGATECALL</code></a>,
<a href="https://github.com/luxfi/subnet-evm/blob/helloworld-official-tutorial-v2/core/vm/evm.go#L445" target="_blank" rel="noopener noreferrer"><code>STATICCALL</code></a>,
it can run the precompile if the precompile is enabled.</p>
<h2 class="anchor anchorWithStickyNavbar_lBvC" id="adding-custom-code">Adding Custom Code<a href="#adding-custom-code" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2>
<p>Search (<code>CTRL F</code>) throughout the file with <code>CUSTOM CODE STARTS HERE</code> to find the areas in the
precompile package that you need to modify. You should start with the reference imports code block.</p>
<h3 class="anchor anchorWithStickyNavbar_lBvC" id="module-file">Module File<a href="#module-file" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3>
<p>The module file contains fundamental information about the precompile. This includes the key for the
precompile, the address of the precompile, and a configurator. This file is located at
<a href="https://github.com/luxfi/subnet-evm/blob/helloworld-official-tutorial-v2/precompile/contracts/helloworld/module.go" target="_blank" rel="noopener noreferrer"><code>./precompile/helloworld/module.go</code></a>
for Subnet-EVM and
<a href="https://github.com/luxfi/precompile-evm/blob/hello-world-example/helloworld/module.go" target="_blank" rel="noopener noreferrer">./helloworld/module.go</a>
for Precompile-EVM.</p>
<p>This file defines the module for the precompile. The module is used to register the precompile to the
precompile registry. The precompile registry is used to read configs and enable the precompile.
Registration is done in the <code>init()</code> function of the module file. <code>MakeConfig()</code> is used to create a
new instance for the precompile config. This will be used in custom Unmarshal/Marshal logic.
You don&#x27;t need to override these functions.</p>
<h4 class="anchor anchorWithStickyNavbar_lBvC" id="configure">Configure()<a href="#configure" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4>
<p>Module file contains a <code>configurator</code> which implements the <code>contract.Configurator</code> interface. This interface
includes a <code>Configure()</code> function used to configure the precompile and set the initial
state of the precompile. This function is called when the precompile is enabled. This is typically used
to read from a given config in upgrade/genesis JSON and sets the initial state of the
precompile accordingly. This function also calls <code>AllowListConfig.Configure()</code> to invoke AllowList
configuration as the last step. You should keep it as it is if you want to use AllowList.
You can modify this function for your custom logic. You can circle back to this function later
after you have finalized the implementation of the precompile config.</p>
<h3 class="anchor anchorWithStickyNavbar_lBvC" id="config-file">Config File<a href="#config-file" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3>
<p>The config file contains the config for the precompile. This file is located at
<a href="https://github.com/luxfi/subnet-evm/blob/helloworld-official-tutorial-v2/precompile/contracts/helloworld/config.go" target="_blank" rel="noopener noreferrer"><code>./precompile/helloworld/config.go</code></a>
for Subnet-EVM and
<a href="https://github.com/luxfi/precompile-evm/blob/hello-world-example/helloworld/config.go" target="_blank" rel="noopener noreferrer">./helloworld/config.go</a>
for Precompile-EVM.
This file contains the <code>Config</code> struct, which implements <code>precompileconfig.Config</code> interface.
It has some embedded structs like <code>precompileconfig.Upgrade</code>. <code>Upgrade</code> is used to enable
upgrades for the precompile. It contains the <code>BlockTimestamp</code> and <code>Disable</code> to enable/disable
upgrades. <code>BlockTimestamp</code> is the timestamp of the block when the upgrade will be activated.
<code>Disable</code> is used to disable the upgrade. If you use <code>AllowList</code> for the precompile, there is also
<code>allowlist.AllowListConfig</code> embedded in the <code>Config</code> struct. <code>AllowListConfig</code> is used to specify initial
roles for specified addresses. If you have any custom fields in your precompile config, you can add them
here. These custom fields will be read from upgrade/genesis JSON and set in the precompile config.</p>
<div class="language-go codeBlockContainer_hIkJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_lj6G"><pre tabindex="0" class="prism-code language-go codeBlock_shPM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_GuLG"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Config implements the precompileconfig.Config interface and</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// adds specific configuration for HelloWorld.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Config </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	allowlist</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AllowListConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	precompileconfig</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Upgrade</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_UauG"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_N3nO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_OX13"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hEg0"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_lBvC" id="verify">Verify()<a href="#verify" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4>
<p><code>Verify()</code> is called on startup and an error is treated as fatal. Generated code contains a call
to <code>AllowListConfig.Verify()</code> to verify the <code>AllowListConfig</code>. You can leave that as is and start
adding your own custom verify code after that.</p>
<p>We can leave this function as is right now because there is no invalid custom configuration for the <code>Config</code>.</p>
<div class="language-go codeBlockContainer_hIkJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_lj6G"><pre tabindex="0" class="prism-code language-go codeBlock_shPM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_GuLG"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Verify tries to verify Config and returns an error accordingly.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Verify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// Verify AllowList first</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AllowListConfig</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Verify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// CUSTOM CODE STARTS HERE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// Add your own custom verify code for Config here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// and return an error accordingly</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_UauG"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_N3nO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_OX13"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hEg0"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_lBvC" id="equal">Equal()<a href="#equal" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4>
<p>Next, we see is <code>Equal()</code>. This function determines if two precompile configs are equal. This is used
to determine if the precompile needs to be upgraded. There is some default code that is generated for
checking <code>Upgrade</code> and <code>AllowListConfig</code> equality.</p>
<div class="language-go codeBlockContainer_hIkJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_lj6G"><pre tabindex="0" class="prism-code language-go codeBlock_shPM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_GuLG"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Equal returns true if [s] is a [*Config] and it has been configured identical to [c].</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Equal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s precompileconfig</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// typecast before comparison</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	other</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ok </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">ok </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// CUSTOM CODE STARTS HERE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// modify this boolean accordingly with your custom Config, to check if [other] and the current [c] are equal</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// if Config contains only Upgrade  and AllowListConfig  you can skip modifying it.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	equals </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Upgrade</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Equal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">other</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Upgrade</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AllowListConfig</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Equal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">other</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AllowListConfig</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> equals</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_UauG"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_N3nO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_OX13"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hEg0"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We can leave this function as is since we check <code>Upgrade</code> and <code>AllowListConfig</code> for equality which are
the only fields that <code>Config</code> struct has.</p>
<h3 class="anchor anchorWithStickyNavbar_lBvC" id="modify-configure">Modify Configure()<a href="#modify-configure" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3>
<p>We can now circle back to <code>Configure()</code> in <code>module.go</code> as we finished implementing <code>Config</code> struct.
This function configures the <code>state</code> with the
initial configuration at<code>blockTimestamp</code> when the precompile is enabled.
In the HelloWorld example, we want to set up a default
key-value mapping in the state where the key is <code>storageKey</code> and the value is <code>Hello World!</code>. The
<code>StateDB</code> allows us to store a key-value mapping of 32-byte hashes. The below code snippet can be
copied and pasted to overwrite the default <code>Configure()</code> code.</p>
<div class="language-go codeBlockContainer_hIkJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_lj6G"><pre tabindex="0" class="prism-code language-go codeBlock_shPM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_GuLG"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> defaultGreeting </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Hello World!&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Configure configures [state] with the given [cfg] precompileconfig.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// This function is called by the EVM once per precompile contract activation.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// You can use this function to set up your precompile contract&#x27;s initial state,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// by using the [cfg] config and [state] stateDB.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">configurator</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Configure</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">chainConfig contract</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ChainConfig</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cfg precompileconfig</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Config</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> state contract</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">StateDB</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> contract</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">BlockContext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	config</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ok </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> cfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">ok </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Errorf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;incorrect config %T: %v&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// CUSTOM CODE STARTS HERE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// This will be called in the first block where HelloWorld stateful precompile is enabled.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// 1) If BlockTimestamp is nil, this will not be called</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// 2) If BlockTimestamp is 0, this will be called while setting up the genesis block</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// 3) If BlockTimestamp is 1000, this will be called while processing the first block</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// whose timestamp is &gt;= 1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// Set the initial value under [common.BytesToHash([]byte(&quot;storageKey&quot;)] to &quot;Hello World!&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">StoreGreeting</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> defaultGreeting</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// AllowList is activated for this precompile. Configuring allowlist addresses here.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AllowListConfig</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Configure</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ContractAddress</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_UauG"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_N3nO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_OX13"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hEg0"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_lBvC" id="contract-file">Contract File<a href="#contract-file" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3>
<p>The contract file contains the functions of the precompile contract that will be called by the EVM. The
file is located at <a href="https://github.com/luxfi/subnet-evm/blob/helloworld-official-tutorial-v2/precompile/contracts/helloworld/contract.go" target="_blank" rel="noopener noreferrer"><code>./precompile/helloworld/contract.go</code></a>
for Subnet-EVM and
<a href="https://github.com/luxfi/precompile-evm/blob/hello-world-example/helloworld/contract.go" target="_blank" rel="noopener noreferrer">./helloworld/contract.go</a>
for Precompile-EVM.
Since we use <code>IAllowList</code> interface there will be auto-generated code for <code>AllowList</code>
functions like below:</p>
<div class="language-go codeBlockContainer_hIkJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_lj6G"><pre tabindex="0" class="prism-code language-go codeBlock_shPM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_GuLG"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// GetHelloWorldAllowListStatus returns the role of [address] for the HelloWorld list.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetHelloWorldAllowListStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stateDB contract</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">StateDB</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> address common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Address</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> allowlist</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Role </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> allowlist</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetAllowListStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stateDB</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ContractAddress</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> address</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// SetHelloWorldAllowListStatus sets the permissions of [address] to [role] for the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// HelloWorld list. Assumes [role] has already been verified as valid.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// This stores the [role] in the contract storage with address [ContractAddress]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// and [address] hash. It means that any reusage of the [address] key for different value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// conflicts with the same slot [role] is stored.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Precompile implementations must use a different key than [address] for their storage.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SetHelloWorldAllowListStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stateDB contract</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">StateDB</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> address common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> role allowlist</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Role</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	allowlist</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetAllowListRole</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stateDB</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ContractAddress</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> role</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_UauG"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_N3nO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_OX13"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hEg0"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These will be helpful to use AllowList precompile helper in our functions.</p>
<h4 class="anchor anchorWithStickyNavbar_lBvC" id="packers-and-unpackers">Packers and Unpackers<a href="#packers-and-unpackers" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4>
<p>There are also auto-generated Packers and Unpackers for the ABI. These will be used in <code>sayHello</code> and
<code>setGreeting</code> functions to comfort the ABI.
These functions are auto-generated
and will be used in necessary places accordingly.
You don&#x27;t need to worry about how to deal with them, but it&#x27;s good to know what they are.</p>
<p>Each input to a precompile contract function has it&#x27;s own <code>Unpacker</code> function as follows:</p>
<div class="language-go codeBlockContainer_hIkJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_lj6G"><pre tabindex="0" class="prism-code language-go codeBlock_shPM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_GuLG"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// UnpackSetGreetingInput attempts to unpack [input] into the string type argument</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// assumes that [input] does not include selector (omits first 4 func signature bytes)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">UnpackSetGreetingInput</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	res</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> HelloWorldABI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">UnpackInput</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;setGreeting&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	unpacked </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">abi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ConvertType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> unpacked</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_UauG"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_N3nO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_OX13"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hEg0"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The ABI is a binary format and the input to the precompile contract function is a
byte array. The <code>Unpacker</code> function converts this input to a more easy-to-use format so that we can
use it in our function.</p>
<p>Similarly, there is a <code>Packer</code> function for each output of a precompile contract function as follows:</p>
<div class="language-go codeBlockContainer_hIkJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_lj6G"><pre tabindex="0" class="prism-code language-go codeBlock_shPM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_GuLG"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// PackSayHelloOutput attempts to pack given result of type string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// to conform the ABI outputs.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">PackSayHelloOutput</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> HelloWorldABI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">PackOutput</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;sayHello&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_UauG"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_N3nO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_OX13"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hEg0"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This function converts the output of the function to a byte array that conforms to the ABI and can be
returned to the EVM as a result.</p>
<h4 class="anchor anchorWithStickyNavbar_lBvC" id="modify-sayhello">Modify sayHello()<a href="#modify-sayhello" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4>
<p>The next place to modify is in our <code>sayHello()</code> function. In a previous step, we created the <code>IHelloWorld.sol</code>
interface with two functions <code>sayHello()</code> and <code>setGreeting()</code>. We finally get to implement them here.
If any contract calls these functions from the interface, the below function gets executed. This function
is a simple getter function. In <code>Configure()</code> we set up a mapping with the key as <code>storageKey</code> and
the value as <code>Hello World!</code> In this function, we will be returning whatever value is at <code>storageKey</code>.
The below code snippet can be copied and pasted to overwrite the default <code>setGreeting</code> code.</p>
<p>First, we add a helper function to get the greeting value from the stateDB, this will be helpful
when we test our contract. We will use the <code>storageKeyHash</code> to store the value in the Contract&#x27;s
reserved storage in the stateDB.</p>
<div class="language-go codeBlockContainer_hIkJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_lj6G"><pre tabindex="0" class="prism-code language-go codeBlock_shPM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_GuLG"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// storageKeyHash is the hash of the storage key &quot;storageKey&quot; in the contract storage.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// This is used to store the value of the greeting in the contract storage.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// It is important to use a unique key here to avoid conflicts with other storage keys</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// like addresses, AllowList, etc.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	storageKeyHash </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">BytesToHash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token function" style="color:#d73a49">byte</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;storageKey&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// GetGreeting returns the value of the storage key &quot;storageKey&quot; in the contract storage,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// with leading zeroes trimmed.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// This function is mostly used for tests.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetGreeting</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stateDB contract</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">StateDB</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// Get the value set at recipient</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	value </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> stateDB</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ContractAddress</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> storageKeyHash</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">TrimLeftZeroes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Bytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_UauG"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_N3nO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_OX13"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hEg0"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now we can modify the <code>sayHello</code> function to return the stored value.</p>
<div class="language-go codeBlockContainer_hIkJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_lj6G"><pre tabindex="0" class="prism-code language-go codeBlock_shPM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_GuLG"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sayHello</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">accessibleState contract</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AccessibleState</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> caller common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> addr common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> input </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> suppliedGas </span><span class="token builtin">uint64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> readOnly </span><span class="token builtin">bool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> remainingGas </span><span class="token builtin">uint64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> remainingGas</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> contract</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DeductGas</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">suppliedGas</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SayHelloGasCost</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// CUSTOM CODE STARTS HERE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// Get the current state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	currentState </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> accessibleState</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetStateDB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// Get the value set at recipient</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	value </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetGreeting</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">currentState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	packedOutput</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">PackSayHelloOutput</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> remainingGas</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// Return the packed output and the remaining gas</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> packedOutput</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> remainingGas</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_UauG"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_N3nO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_OX13"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hEg0"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_lBvC" id="modify-setgreeting">Modify setGreeting()<a href="#modify-setgreeting" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4>
<p>We can also modify our <code>setGreeting()</code> function. This is a simple setter function. It takes in <code>input</code>
and we will set that as the value in the state mapping with the key as <code>storageKey</code>. It also checks
if the VM running the precompile is in read-only mode. If it is, it returns an error.</p>
<p>There is also a generated <code>AllowList</code> code in that function. This generated code checks if the caller
address is eligible to perform this state-changing operation. If not, it returns an error.</p>
<p>Let&#x27;s add the helper function to set the greeting value in the stateDB, this will be helpful
when we test our contract.</p>
<div class="language-go codeBlockContainer_hIkJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_lj6G"><pre tabindex="0" class="prism-code language-go codeBlock_shPM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_GuLG"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// StoreGreeting sets the value of the storage key &quot;storageKey&quot; in the contract storage.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">StoreGreeting</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stateDB contract</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">StateDB</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> input </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	inputPadded </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">LeftPadBytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token function" style="color:#d73a49">byte</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HashLength</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	inputHash </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">BytesToHash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inputPadded</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	stateDB</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ContractAddress</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> storageKeyHash</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> inputHash</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_UauG"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_N3nO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_OX13"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hEg0"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The below code snippet can be copied and pasted to overwrite the default <code>setGreeting()</code> code.</p>
<div class="language-go codeBlockContainer_hIkJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_lj6G"><pre tabindex="0" class="prism-code language-go codeBlock_shPM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_GuLG"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setGreeting</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">accessibleState contract</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AccessibleState</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> caller common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> addr common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> input </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> suppliedGas </span><span class="token builtin">uint64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> readOnly </span><span class="token builtin">bool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> remainingGas </span><span class="token builtin">uint64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> remainingGas</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> contract</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DeductGas</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">suppliedGas</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SetGreetingGasCost</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> readOnly </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> remainingGas</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> vmerrs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ErrWriteProtection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// attempts to unpack [input] into the arguments to the SetGreetingInput.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// Assumes that [input] does not include selector</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// You can use unpacked [inputStruct] variable in your code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	inputStruct</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">UnpackSetGreetingInput</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> remainingGas</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// Allow list is enabled and SetGreeting is a state-changer function.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// This part of the code restricts the function to be called only by enabled/admin addresses in the allow list.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// You can modify/delete this code if you don&#x27;t want this function to be restricted by the allow list.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	stateDB </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> accessibleState</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetStateDB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// Verify that the caller is in the allow list and therefore has the right to call this function.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	callerStatus </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> allowlist</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetAllowListStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stateDB</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ContractAddress</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> caller</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">callerStatus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">IsEnabled</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> remainingGas</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Errorf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;%w: %s&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ErrCannotSetGreeting</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> caller</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// allow list code ends here.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// CUSTOM CODE STARTS HERE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// Check if the input string is longer than HashLength</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inputStruct</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> common</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">HashLength </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ErrInputExceedsLimit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// setGreeting is the execution function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// &quot;SetGreeting(name string)&quot; and sets the storageKey</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// in the string returned by hello world</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">StoreGreeting</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stateDB</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> inputStruct</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// This function does not return an output, leave this one as is</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	packedOutput </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// Return the packed output and the remaining gas</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> packedOutput</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> remainingGas</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_UauG"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_N3nO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_OX13"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hEg0"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_lBvC" id="setting-gas-costs">Setting Gas Costs<a href="#setting-gas-costs" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2>
<p>Setting gas costs for functions is very important and should be done carefully.
If the gas costs are set too low,
then functions can be abused and can cause DoS attacks.
If the gas costs are set too high, then the contract will be too expensive
to run.
Subnet-EVM has some predefined gas costs for write and read operations
in <a href="https://github.com/luxfi/subnet-evm/blob/helloworld-official-tutorial-v2/precompile/contract/utils.go#L19-L20" target="_blank" rel="noopener noreferrer"><code>precompile/contract/utils.go</code></a>.
In order to provide a baseline for gas costs, we have set the following gas costs.</p>
<div class="language-go codeBlockContainer_hIkJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_lj6G"><pre tabindex="0" class="prism-code language-go codeBlock_shPM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_GuLG"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Gas costs for stateful precompiles</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	WriteGasCostPerSlot </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20_000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	ReadGasCostPerSlot  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5_000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_UauG"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_N3nO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_OX13"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hEg0"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>WriteGasCostPerSlot</code> is the cost of one write such as modifying a state storage slot.</p>
<p><code>ReadGasCostPerSlot</code> is the cost of reading a state storage slot.</p>
<p>This should be in your gas cost estimations based on how many times the precompile function does a
read or a write. For example, if the precompile modifies the state slot of its precompile address
twice then the gas cost for that function would be <code>40_000</code>. However, if the precompile does additional
operations and requires more computational power, then you should increase the gas costs accordingly.</p>
<p>On top of these gas costs, we also have to account for the gas costs of AllowList gas costs. These
are the gas costs of reading and writing permissions for addresses in AllowList. These are defined
under Subnet-EVM&#x27;s <a href="https://github.com/luxfi/subnet-evm/blob/helloworld-official-tutorial-v2/precompile/allowlist/allowlist.go#L28-L29" target="_blank" rel="noopener noreferrer"><code>precompile/allowlist/allowlist.go</code></a>.
By default, these are added to the default gas costs of the state-change functions (SetGreeting)
of the precompile. Meaning that these functions will cost an additional <code>ReadAllowListGasCost</code> in order
to read permissions from the storage. If you don&#x27;t plan to read permissions from the storage then
you can omit these.</p>
<p>Now going back to our <code>/helloworld/contract.go</code>, we can modify our precompile function gas costs.
Please search (<code>CTRL F</code>) <code>SET A GAS COST HERE</code> to locate the default gas cost code.</p>
<div class="language-go codeBlockContainer_hIkJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_lj6G"><pre tabindex="0" class="prism-code language-go codeBlock_shPM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_GuLG"><span class="token-line" style="color:#393A34"><span class="token plain">SayHelloGasCost    </span><span class="token builtin">uint64</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">                                  </span><span class="token comment" style="color:#999988;font-style:italic">// SET A GAS COST HERE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SetGreetingGasCost </span><span class="token builtin">uint64</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> allowlist</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ReadAllowListGasCost </span><span class="token comment" style="color:#999988;font-style:italic">// SET A GAS COST HERE</span><br></span></code></pre><div class="buttonGroup_UauG"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_N3nO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_OX13"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hEg0"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We get and set our greeting with <code>sayHello()</code> and <code>setGreeting()</code> in one slot
respectively so we can define the gas costs as follows. We also read permissions from the
AllowList in <code>setGreeting()</code> so we keep <code>allowlist.ReadAllowListGasCost</code>.</p>
<div class="language-go codeBlockContainer_hIkJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_lj6G"><pre tabindex="0" class="prism-code language-go codeBlock_shPM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_GuLG"><span class="token-line" style="color:#393A34"><span class="token plain">SayHelloGasCost    </span><span class="token builtin">uint64</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> contract</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ReadGasCostPerSlot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SetGreetingGasCost </span><span class="token builtin">uint64</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> contract</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WriteGasCostPerSlot </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> allowlist</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ReadAllowListGasCost</span><br></span></code></pre><div class="buttonGroup_UauG"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_N3nO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_OX13"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hEg0"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_lBvC" id="registering-your-precompile">Registering Your Precompile<a href="#registering-your-precompile" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2>
<p>We should register our precompile package to the Subnet-EVM to be discovered by other packages.
Our <code>Module</code> file contains an <code>init()</code> function that registers our precompile.
<code>init()</code> is called when the package is imported.
We should register our precompile in a common package so
that it can be imported by other packages.</p>
<div class="tabs-container tabList_hAgJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_inov tabs__item--active">Subnet-EVM</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_inov">Precompile-EVM</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_QyJb"><p>For Subnet-EVM we have a precompile registry under <a href="https://github.com/luxfi/subnet-evm/blob/helloworld-official-tutorial-v2/precompile/registry/registry.go" target="_blank" rel="noopener noreferrer"><code>/precompile/registry/registry.go</code></a>.
This registry force-imports precompiles from other packages, for example:</p><div class="language-go codeBlockContainer_hIkJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_lj6G"><pre tabindex="0" class="prism-code language-go codeBlock_shPM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_GuLG"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Force imports of each precompile to ensure each precompile&#x27;s init function runs and registers itself</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// with the registry.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;github.com/luxfi/subnet-evm/precompile/contracts/deployerallowlist&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;github.com/luxfi/subnet-evm/precompile/contracts/nativeminter&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;github.com/luxfi/subnet-evm/precompile/contracts/txallowlist&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;github.com/luxfi/subnet-evm/precompile/contracts/feemanager&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;github.com/luxfi/subnet-evm/precompile/contracts/rewardmanager&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;github.com/luxfi/subnet-evm/precompile/contracts/helloworld&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// ADD YOUR PRECOMPILE HERE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// _ &quot;github.com/luxfi/subnet-evm/precompile/contracts/yourprecompile&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_UauG"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_N3nO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_OX13"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hEg0"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The registry itself also force-imported by the <a href="https://github.com/luxfi/subnet-evm/blob/helloworld-official-tutorial-v2/plugin/evm/vm.go#L50" target="_blank" rel="noopener noreferrer">`/plugin/evm/vm.go</a>.
This ensures that the registry is imported and the precompiles are registered.</p></div><div role="tabpanel" class="tabItem_QyJb" hidden=""><p>For Precompile-EVM there is a <a href="https://github.com/luxfi/precompile-evm/blob/hello-world-example/plugin/main.go" target="_blank" rel="noopener noreferrer"><code>plugin/main.go</code></a>
file in Precompile-EVM that orchestrates this precompile registration.</p><div class="language-go codeBlockContainer_hIkJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_lj6G"><pre tabindex="0" class="prism-code language-go codeBlock_shPM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_GuLG"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// (c) 2019-2023, Lux Partners, Inc. All rights reserved.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// See the file LICENSE for licensing terms.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token string" style="color:#e3116c">&quot;fmt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token string" style="color:#e3116c">&quot;github.com/luxfi/luxd/version&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token string" style="color:#e3116c">&quot;github.com/luxfi/subnet-evm/plugin/evm&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token string" style="color:#e3116c">&quot;github.com/luxfi/subnet-evm/plugin/runner&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// Each precompile generated by the precompilegen tool has a self-registering init function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// that registers the precompile with the subnet-evm. Importing the precompile package here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// will cause the precompile to be registered with the subnet-evm.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;github.com/luxfi/precompile-evm/helloworld&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// ADD YOUR PRECOMPILE HERE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">//_ &quot;github.com/luxfi/precompile-evm/{yourprecompilepkg}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_UauG"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_N3nO" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_OX13"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_hEg0"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_CNxv padding--none margin-left--sm"><li class="tag_jKOw"><a class="tag_zRRt tagRegular_QHcs" href="/docs/tags/build">Build</a></li><li class="tag_jKOw"><a class="tag_zRRt tagRegular_QHcs" href="/docs/tags/virtual-machines">Virtual Machines</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/luxfi/docs/edit/main/docs/build/vm/evm/defining-precompile.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit__Bgm" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_pihW"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/build/vm/evm/generate-precompile"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Generating Your Precompile</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/build/vm/evm/defining-tests"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Writing Test Cases</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_aCBG thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#setting-config-key" class="table-of-contents__link toc-highlight">Setting Config Key</a></li><li><a href="#setting-contract-address" class="table-of-contents__link toc-highlight">Setting Contract Address</a></li><li><a href="#adding-custom-code" class="table-of-contents__link toc-highlight">Adding Custom Code</a><ul><li><a href="#module-file" class="table-of-contents__link toc-highlight">Module File</a></li><li><a href="#config-file" class="table-of-contents__link toc-highlight">Config File</a></li><li><a href="#modify-configure" class="table-of-contents__link toc-highlight">Modify Configure()</a></li><li><a href="#contract-file" class="table-of-contents__link toc-highlight">Contract File</a></li></ul></li><li><a href="#setting-gas-costs" class="table-of-contents__link toc-highlight">Setting Gas Costs</a></li><li><a href="#registering-your-precompile" class="table-of-contents__link toc-highlight">Registering Your Precompile</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row"><div class="col"><div class="footer-row"><a href="https://lux.chat" target="_blank" rel="noopener noreferrer" class="footer-main-list"><h3>AI<!-- --> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" class="footer-academy-cap" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"></path></svg></h3></a></div><div class="footer-row"><a href="https://explore.lux.network/" target="_blank" rel="noopener noreferrer" class="footer-main-list"><h3>Explore</h3></a></div><div class="footer-row"><a href="https://help.lux.network/" target="_blank" rel="noopener noreferrer" class="footer-main-list"><h3>Help</h3></a></div><div class="footer-row"><a href="https://wallet.lux.network/" target="_blank" rel="noopener noreferrer" class="footer-main-list"><h3>Wallet</h3></a></div></div><div class="col"><div class="footer-row"><a href="https://t.me/luxdefi"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="footer-social" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.287 5.906c-.778.324-2.334.994-4.666 2.01-.378.15-.577.298-.595.442-.03.243.275.339.69.47l.175.055c.408.133.958.288 1.243.294.26.006.549-.1.868-.32 2.179-1.471 3.304-2.214 3.374-2.23.05-.012.12-.026.166.016.047.041.042.12.037.141-.03.129-1.227 1.241-1.846 1.817-.193.18-.33.307-.358.336a8.154 8.154 0 0 1-.188.186c-.38.366-.664.64.015 1.088.327.216.589.393.85.571.284.194.568.387.936.629.093.06.183.125.27.187.331.236.63.448.997.414.214-.02.435-.22.547-.82.265-1.417.786-4.486.906-5.751a1.426 1.426 0 0 0-.013-.315.337.337 0 0 0-.114-.217.526.526 0 0 0-.31-.093c-.3.005-.763.166-2.984 1.09z"></path></svg></a><a href="https://discord.gg/MxFdWsQY"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="footer-social" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"></path></svg></a><a href="https://github.com/luxfi"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="footer-social" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></a><a href="https://twitter.com/luxdefi"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="footer-social" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"></path></svg></a><a href="https://www.reddit.com/r/luxdefi/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="footer-social" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M6.167 8a.831.831 0 0 0-.83.83c0 .459.372.84.83.831a.831.831 0 0 0 0-1.661zm1.843 3.647c.315 0 1.403-.038 1.976-.611a.232.232 0 0 0 0-.306.213.213 0 0 0-.306 0c-.353.363-1.126.487-1.67.487-.545 0-1.308-.124-1.671-.487a.213.213 0 0 0-.306 0 .213.213 0 0 0 0 .306c.564.563 1.652.61 1.977.61zm.992-2.807c0 .458.373.83.831.83.458 0 .83-.381.83-.83a.831.831 0 0 0-1.66 0z"></path><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.828-1.165c-.315 0-.602.124-.812.325-.801-.573-1.9-.945-3.121-.993l.534-2.501 1.738.372a.83.83 0 1 0 .83-.869.83.83 0 0 0-.744.468l-1.938-.41a.203.203 0 0 0-.153.028.186.186 0 0 0-.086.134l-.592 2.788c-1.24.038-2.358.41-3.17.992-.21-.2-.496-.324-.81-.324a1.163 1.163 0 0 0-.478 2.224c-.02.115-.029.23-.029.353 0 1.795 2.091 3.256 4.669 3.256 2.577 0 4.668-1.451 4.668-3.256 0-.114-.01-.238-.029-.353.401-.181.688-.592.688-1.069 0-.65-.525-1.165-1.165-1.165z"></path></svg></a><a href="https://www.youtube.com/@luxdefi"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="footer-social" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.007 2.007 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.007 2.007 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31.4 31.4 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.007 2.007 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A99.788 99.788 0 0 1 7.858 2h.193zM6.4 5.209v4.818l4.157-2.408L6.4 5.209z"></path></svg></a><a href="https://www.linkedin.com/company/luxdefi"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="footer-social" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"></path></svg></a><a href="https://www.facebook.com/luxdefi"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="footer-social" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"></path></svg></a></div><div class="row" style="margin-top:10px;max-width:500px"><div class="col"><h4 class="footer-heading">Developers</h4><a href="https://github.com/orgs/luxfi/discussions"><div class="footer-list">Discussions</div></a><a href="https://explore.lux.network/stats"><div class="footer-list">Network Stats</div></a><a href="https://www.youtube.com/@luxdefi"><div class="footer-list">Video Tutorials</div></a><a href="https://hackenproof.com/luxdefi"><div class="footer-list">Bug Bounty</div></a></div><div class="col"><h4 class="footer-heading">Community</h4><a href="https://medium.com/luxdefi"><div class="footer-list">Medium</div></a><a href="https://blog.lux.network/"><div class="footer-list">Blog</div></a><a href="https://lux.shop/"><div class="footer-list">Merch</div></a></div><div class="col"><h4 class="footer-heading">More</h4><a href="https://drive.google.com/drive/folders/1vDXeyAeJUQLzeua447CT0Xn_h2YVq-6G"><div class="footer-list">Whitepapers</div></a><a href="https://lux.partners/"><div class="footer-list">Enterprise Solutions</div></a><a href="https://github.com/luxfi/audits"><div class="footer-list">Audits</div></a><a href="mailto:legal@lux.partners"><div class="footer-list">Legal</div></a></div></div></div></div><div class="footer__bottom text--center"><div class="footer__copyright" style="font-size:small;padding:15px">Copyright Â© <!-- -->2024<!-- --> <a href="https://lux.partners/terms" class="hover">Lux Partners Limited</a></div></div></div></footer></div>
</body>
</html>
"use strict";(self.webpackChunk_luxdocs_network=self.webpackChunk_luxdocs_network||[]).push([[8256],{71051:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>a});var i=s(49214),c=s(43540);const o={tags:["Luxd APIs"],description:"This page is an overview of the IPC API associated with Luxd.",sidebar_label:"IPC API",pagination_label:"IPC API"},t="IPC API",l={id:"reference/luxd/ipc-api",title:"IPC API",description:"This page is an overview of the IPC API associated with Luxd.",source:"@site/docs/reference/luxd/ipc-api.md",sourceDirName:"reference/luxd",slug:"/reference/luxd/ipc-api",permalink:"/docs/reference/luxd/ipc-api",draft:!1,unlisted:!1,editUrl:"https://github.com/luxfi/docs/edit/main/docs/reference/luxd/ipc-api.md",tags:[{label:"Luxd APIs",permalink:"/docs/tags/luxd-ap-is"}],version:"current",frontMatter:{tags:["Luxd APIs"],description:"This page is an overview of the IPC API associated with Luxd.",sidebar_label:"IPC API",pagination_label:"IPC API"},sidebar:"reference",previous:{title:"Info API",permalink:"/docs/reference/luxd/info-api"},next:{title:"Keystore API",permalink:"/docs/reference/luxd/keystore-api"}},r={},a=[{value:"IPC Message Format",id:"ipc-message-format",level:2},{value:"IPC Socket URL Format",id:"ipc-socket-url-format",level:2},{value:"Format",id:"format",level:2},{value:"Endpoint",id:"endpoint",level:2},{value:"Methods",id:"methods",level:2},{value:"<code>ipcs.publishBlockchain</code>",id:"ipcspublishblockchain",level:3},{value:"<code>ipcs.unpublishBlockchain</code>",id:"ipcsunpublishblockchain",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"ipc-api",children:"IPC API"}),"\n",(0,i.jsx)(n.p,{children:"The IPC API allows users to create Unix domain sockets for blockchains to publish to. When the\nblockchain accepts a vertex/block it will publish it to a socket and the decisions contained inside\nwill be published to another."}),"\n",(0,i.jsxs)(n.p,{children:["A node will only expose this API if it is started with ",(0,i.jsx)(n.a,{href:"/docs/nodes/configure/luxd-config-flags",children:"config flag"})," ",(0,i.jsx)(n.code,{children:"api-ipcs-enabled=true"}),"."]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["This API set is for a specific node, it is unavailable on the ",(0,i.jsx)(n.a,{href:"/docs/tooling/rpc-providers",children:"public server"}),"."]})}),"\n",(0,i.jsx)(n.h2,{id:"ipc-message-format",children:"IPC Message Format"}),"\n",(0,i.jsx)(n.p,{children:"Socket messages consist of a 64bit integer in BigEndian format followed by that many bytes."}),"\n",(0,i.jsx)(n.p,{children:"Example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"Sending:\n    [0x41, 0x76, 0x61, 0x78]\nWrites to the socket:\n    [0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x41, 0x76, 0x61, 0x78]\n"})}),"\n",(0,i.jsx)(n.h2,{id:"ipc-socket-url-format",children:"IPC Socket URL Format"}),"\n",(0,i.jsxs)(n.p,{children:["The names of the sockets are of the form ",(0,i.jsx)(n.code,{children:"<network_id>-<chain_id>-<event_type>"})," where ",(0,i.jsx)(n.code,{children:"<event_type>"}),"\nis either ",(0,i.jsx)(n.code,{children:"consensus"})," or ",(0,i.jsx)(n.code,{children:"decisions"}),". The consensus socket receives vertices and blocks and while\nthe decisions socket receives individual transactions."]}),"\n",(0,i.jsx)(n.h2,{id:"format",children:"Format"}),"\n",(0,i.jsxs)(n.p,{children:["This API uses the ",(0,i.jsx)(n.code,{children:"json 2.0"})," RPC format."]}),"\n",(0,i.jsx)(n.h2,{id:"endpoint",children:"Endpoint"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"/ext/ipcs"})}),"\n",(0,i.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,i.jsx)(n.h3,{id:"ipcspublishblockchain",children:(0,i.jsx)(n.code,{children:"ipcs.publishBlockchain"})}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.p,{children:["Deprecated as of ",(0,i.jsx)(n.a,{href:"https://github.com/luxfi/luxd/releases/tag/v1.9.12",children:(0,i.jsx)(n.strong,{children:"v1.9.12"})}),"."]})}),"\n",(0,i.jsx)(n.p,{children:"Register a blockchain so it publishes accepted vertices to a Unix domain socket."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Signature:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"ipcs.publishBlockchain({blockchainID: string}) -> {consensusURL: string, decisionsURL: string}\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"blockchainID"})," is the blockchain that will publish accepted vertices."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"consensusURL"})," is the path of the Unix domain socket the vertices are published to."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"decisionsURL"})," is the path of the Unix domain socket the transactions are published to."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example Call:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:'curl -X POST --data \'{\n    "jsonrpc": "2.0",\n    "method": "ipcs.publishBlockchain",\n    "params":{\n        "blockchainID":"11111111111111111111111111111111LpoYY"\n    },\n    "id": 1\n}\' -H \'content-type:application/json;\' 127.0.0.1:9650/ext/ipcs\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "result": {\n    "decisionsURL": "/tmp/1-11111111111111111111111111111111LpoYY-consensus",\n    "consensusURL": "/tmp/1-11111111111111111111111111111111LpoYY-decisions"\n  },\n  "id": 1\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"ipcsunpublishblockchain",children:(0,i.jsx)(n.code,{children:"ipcs.unpublishBlockchain"})}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.p,{children:["Deprecated as of ",(0,i.jsx)(n.a,{href:"https://github.com/luxfi/luxd/releases/tag/v1.9.12",children:(0,i.jsx)(n.strong,{children:"v1.9.12"})}),"."]})}),"\n",(0,i.jsx)(n.p,{children:"Deregister a blockchain so that it no longer publishes to a Unix domain socket."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Signature:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"ipcs.unpublishBlockchain({blockchainID: string}) -> {}\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"blockchainID"})," is the blockchain that will no longer publish to a Unix domain socket."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example Call:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:'curl -X POST --data \'{\n    "jsonrpc": "2.0",\n    "method": "ipcs.unpublishBlockchain",\n    "params":{\n        "blockchainID":"11111111111111111111111111111111LpoYY"\n    },\n    "id": 1\n}\' -H \'content-type:application/json;\' 127.0.0.1:9650/ext/ipcs\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "result": {},\n  "id": 1\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},43540:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var i=s(48318);const c={},o=i.createContext(c);function t(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:t(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);
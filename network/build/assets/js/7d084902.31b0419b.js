"use strict";(self.webpackChunk_luxdocs_network=self.webpackChunk_luxdocs_network||[]).push([[9269],{91940:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>l,frontMatter:()=>o,metadata:()=>a,toc:()=>d});var t=s(49214),i=s(43540);const o={tags:["Standards"],description:"This guide explains how to make calls to APIs exposed by Lux nodes.",sidebar_label:"API Calls",pagination_label:"Issuing API Calls",sidebar_position:0},r="Issuing API Calls",a={id:"reference/standards/guides/issuing-api-calls",title:"Issuing API Calls",description:"This guide explains how to make calls to APIs exposed by Lux nodes.",source:"@site/docs/reference/standards/guides/issuing-api-calls.md",sourceDirName:"reference/standards/guides",slug:"/reference/standards/guides/issuing-api-calls",permalink:"/docs/reference/standards/guides/issuing-api-calls",draft:!1,unlisted:!1,editUrl:"https://github.com/luxfi/docs/edit/main/docs/reference/standards/guides/issuing-api-calls.md",tags:[{label:"Standards",permalink:"/docs/tags/standards"}],version:"current",sidebarPosition:0,frontMatter:{tags:["Standards"],description:"This guide explains how to make calls to APIs exposed by Lux nodes.",sidebar_label:"API Calls",pagination_label:"Issuing API Calls",sidebar_position:0},sidebar:"reference",previous:{title:"Serialization Primitives",permalink:"/docs/reference/standards/serialization-primitives"},next:{title:"Lux Transaction Fees",permalink:"/docs/reference/standards/guides/txn-fees"}},c={},d=[{value:"Endpoints",id:"endpoints",level:2},{value:"Base URL",id:"base-url",level:3},{value:"Endpoint Path",id:"endpoint-path",level:3},{value:"Primary Network and Subnet RPC calls",id:"primary-network-and-subnet-rpc-calls",level:2},{value:"Primary Network Endpoints",id:"primary-network-endpoints",level:3},{value:"C-Chain and Subnet-EVM Endpoints",id:"c-chain-and-subnet-evm-endpoints",level:3},{value:"JSON-RPC EVM Endpoints",id:"json-rpc-evm-endpoints",level:4},{value:"Websocket EVM Endpoints",id:"websocket-evm-endpoints",level:4},{value:"Making a JSON RPC Request",id:"making-a-json-rpc-request",level:2},{value:"JSON RPC Success Response",id:"json-rpc-success-response",level:3},{value:"JSON RPC Error Response",id:"json-rpc-error-response",level:3},{value:"Other API Formats",id:"other-api-formats",level:2},{value:"Sending and Receiving Bytes",id:"sending-and-receiving-bytes",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"issuing-api-calls",children:"Issuing API Calls"}),"\n",(0,t.jsx)(n.p,{children:"This guide explains how to make calls to APIs exposed by Lux nodes."}),"\n",(0,t.jsx)(n.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,t.jsx)(n.p,{children:"An API call is made to an endpoint, which is a URL, made up of the base URI\nwhich is the address and the port of the node, and the path the particular\nendpoint the API call is on."}),"\n",(0,t.jsx)(n.h3,{id:"base-url",children:"Base URL"}),"\n",(0,t.jsx)(n.p,{children:"The base of the URL is always:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"[node-ip]:[http-port]"})}),"\n",(0,t.jsx)(n.p,{children:"where"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"node-ip"})," is the IP address of the node the call is to."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"http-port"})," is the port the node listens on for HTTP calls. This is specified\nby ",(0,t.jsx)(n.a,{href:"/docs/nodes/configure/luxd-config-flags#http-server",children:"command-line argument"}),"\n",(0,t.jsx)(n.code,{children:"http-port"})," (default value ",(0,t.jsx)(n.code,{children:"9650"}),")."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["For example, if you're making RPC calls on the local node, the base URL might look like this: ",(0,t.jsx)(n.code,{children:"127.0.0.1:9650"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["If you're making RPC calls to remote nodes, then the instead of ",(0,t.jsx)(n.code,{children:"127.0.0.1"})," you\nshould use the public IP of the server where the node is. Note that by default\nthe node will only accept API calls on the local interface, so you will need to\nset up the\n",(0,t.jsx)(n.a,{href:"/docs/nodes/configure/chain-config-flags#--http-host-string",children:(0,t.jsx)(n.code,{children:"http-host"})}),"\nconfig flag on the node. Also, you will need to make sure the firewall and/or\nsecurity policy allows access to the ",(0,t.jsx)(n.code,{children:"http-port"})," from the internet."]}),"\n",(0,t.jsx)(n.admonition,{type:"caution",children:(0,t.jsxs)(n.p,{children:["When setting up RPC access to a node, make sure you don't leave the\n",(0,t.jsx)(n.code,{children:"http-port"})," accessible to everyone! There are malicious actors that scan for\nnodes that have unrestricted access to their RPC port and then use those nodes\nfor spamming them with resource-intensive queries which can knock the node\noffline. Only allow access to your node's RPC port from known IP addresses!"]})}),"\n",(0,t.jsx)(n.h3,{id:"endpoint-path",children:"Endpoint Path"}),"\n",(0,t.jsx)(n.p,{children:"Each API\u2019s documentation specifies what endpoint path a user should make calls\nto in order to access the API\u2019s methods."}),"\n",(0,t.jsx)(n.p,{children:"In general, they are formatted like:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"/ext/[api-name]\n"})}),"\n",(0,t.jsxs)(n.p,{children:["So for the Admin API, the endpoint path is ",(0,t.jsx)(n.code,{children:"/ext/admin"}),", for the Info API it is\n",(0,t.jsx)(n.code,{children:"/ext/info"})," and so on. Note that some APIs have additional path components, most\nnotably the chain RPC endpoints which includes the Subnet chain RPCs. We'll go\nover those in detail in the next section."]}),"\n",(0,t.jsx)(n.p,{children:"So, in combining the base URL and the endpoint path we get the complete URL for\nmaking RPC calls. For example, to make a local RPC call on the Info API, the\nfull URL would be:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"http://127.0.0.1:9650/ext/info\n"})}),"\n",(0,t.jsx)(n.h2,{id:"primary-network-and-subnet-rpc-calls",children:"Primary Network and Subnet RPC calls"}),"\n",(0,t.jsx)(n.p,{children:"Besides the APIs that are local to the node, like Admin or Metrics APIs, nodes\nalso expose endpoints for talking to particular chains that are either part of\nthe Primary Network (the X, P and C chains), or part of any Subnets the node\nmight be syncing or validating."}),"\n",(0,t.jsx)(n.p,{children:"In general, chain endpoints are formatted as:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"ext/bc/[blockchainID]\n"})}),"\n",(0,t.jsx)(n.h3,{id:"primary-network-endpoints",children:"Primary Network Endpoints"}),"\n",(0,t.jsx)(n.p,{children:"The Primary Network consists of three chains: X, P and C chain. As those chains\nare present on every node, there are also convenient aliases defined that can be\nused instead of the full blockchainIDs. So, the endpoints look like:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"ext/bc/X\next/bc/P\next/bc/C\n"})}),"\n",(0,t.jsx)(n.h3,{id:"c-chain-and-subnet-evm-endpoints",children:"C-Chain and Subnet-EVM Endpoints"}),"\n",(0,t.jsx)(n.p,{children:"C-Chain and many Subnets run a version of the EthereumVM (EVM). EVM exposes its\nown endpoints, which are also accessible on the node: JSON-RPC, and Websocket."}),"\n",(0,t.jsx)(n.h4,{id:"json-rpc-evm-endpoints",children:"JSON-RPC EVM Endpoints"}),"\n",(0,t.jsx)(n.p,{children:"To interact with C-Chain EVM via the JSON-RPC use the endpoint:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"/ext/bc/C/rpc\n"})}),"\n",(0,t.jsx)(n.p,{children:"To interact with Subnet instances of the EVM via the JSON-RPC endpoint:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"/ext/bc/[blockchainID]/rpc\n"})}),"\n",(0,t.jsxs)(n.p,{children:["where ",(0,t.jsx)(n.code,{children:"blockchainID"})," is the ID of the blockchain running the EVM. So for\nexample, the RPC URL for the DFK Network (a Subnet that runs the DeFi Kingdoms",":Crystalvale"," game)\nrunning on a local node would be:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"http://127.0.0.1/ext/bc/q2aTwKuyzgs8pynF7UXBZCU7DejbZbZ6EUyHr3JQzYgwNPUPi/rpc\n"})}),"\n",(0,t.jsx)(n.p,{children:"Or for the ZOO Subnet on the Testnet:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"http://127.0.0.1/ext/bc/2ebCneCbwthjQ1rYT41nhd7M76Hc6YmosMAQrTFhBq8qeqh6tt/rpc\n"})}),"\n",(0,t.jsx)(n.h4,{id:"websocket-evm-endpoints",children:"Websocket EVM Endpoints"}),"\n",(0,t.jsx)(n.p,{children:"To interact with C-Chain via the websocket endpoint, use:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"/ext/bc/C/ws\n"})}),"\n",(0,t.jsx)(n.p,{children:"To interact with other instances of the EVM via the websocket endpoint:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"/ext/bc/blockchainID/ws\n"})}),"\n",(0,t.jsxs)(n.p,{children:["where ",(0,t.jsx)(n.code,{children:"blockchainID"})," is the ID of the blockchain running the EVM. For example,\nto interact with the C-Chain's Ethereum APIs via websocket on localhost you can\nuse:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"ws://127.0.0.1:9650/ext/bc/C/ws\n"})}),"\n",(0,t.jsxs)(n.admonition,{type:"info",children:[(0,t.jsxs)(n.p,{children:["When using the ",(0,t.jsx)(n.a,{href:"/docs/tooling/rpc-providers",children:"Public API"})," or another host\nthat supports HTTPS, use ",(0,t.jsx)(n.code,{children:"https://"})," or ",(0,t.jsx)(n.code,{children:"wss://"})," instead of ",(0,t.jsx)(n.code,{children:"http://"})," or ",(0,t.jsx)(n.code,{children:"ws://"}),"."]}),(0,t.jsxs)(n.p,{children:["Also, note that the ",(0,t.jsx)(n.a,{href:"/docs/tooling/rpc-providers#supported-apis",children:"public API"})," only\nsupports C-Chain websocket API calls for API methods that don't exist on the\nC-Chain's HTTP API."]})]}),"\n",(0,t.jsx)(n.h2,{id:"making-a-json-rpc-request",children:"Making a JSON RPC Request"}),"\n",(0,t.jsxs)(n.p,{children:["Most of the built-in APIs use the ",(0,t.jsx)(n.a,{href:"https://www.jsonrpc.org/specification",children:"JSON RPC\n2.0"})," format to describe their requests\nand responses. Such APIs include the Platform API and the X-Chain API."]}),"\n",(0,t.jsxs)(n.p,{children:["Suppose we want to call the ",(0,t.jsx)(n.code,{children:"getTxStatus"})," method of the ",(0,t.jsx)(n.a,{href:"/docs/reference/luxd/x-chain/api",children:"X-Chain API"}),". The X-Chain API documentation tells us that the\nendpoint for this API is ",(0,t.jsx)(n.code,{children:"/ext/bc/X"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"That means that the endpoint we send our API call to is:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"[node-ip]:[http-port]/ext/bc/X"})}),"\n",(0,t.jsxs)(n.p,{children:["The X-Chain API documentation tells us that the signature of ",(0,t.jsx)(n.code,{children:"getTxStatus"})," is:"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"/docs/reference/luxd/x-chain/api#avmgettxstatus",children:(0,t.jsx)(n.code,{children:"avm.getTxStatus"})}),(0,t.jsx)(n.code,{children:"(txID:bytes) -> (status:string)"})]}),"\n",(0,t.jsx)(n.p,{children:"where:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Argument ",(0,t.jsx)(n.code,{children:"txID"})," is the ID of the transaction we\u2019re getting the status of."]}),"\n",(0,t.jsxs)(n.li,{children:["Returned value ",(0,t.jsx)(n.code,{children:"status"})," is the status of the transaction in question."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"To call this method, then:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'curl -X POST --data \'{\n    "jsonrpc":"2.0",\n    "id"     :4,\n    "method" :"avm.getTxStatus",\n    "params" :{\n        "txID":"2QouvFWUbjuySRxeX5xMbNCuAaKWfbk5FeEa2JmoF85RKLk2dD"\n    }\n}\' -H \'content-type:application/json;\' 127.0.0.1:9650/ext/bc/X\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"jsonrpc"})," specifies the version of the JSON RPC protocol. (In practice is always 2.0)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"method"})," specifies the service (",(0,t.jsx)(n.code,{children:"avm"}),") and method (",(0,t.jsx)(n.code,{children:"getTxStatus"}),") that we want to invoke."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"params"})," specifies the arguments to the method."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"id"})," is the ID of this request. Request IDs should be unique."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"That\u2019s it!"}),"\n",(0,t.jsx)(n.h3,{id:"json-rpc-success-response",children:"JSON RPC Success Response"}),"\n",(0,t.jsx)(n.p,{children:"If the call is successful, the response will look like this:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "result": {\n    "Status": "Accepted"\n  },\n  "id": 1\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"id"})," is the ID of the request that this response corresponds to."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"result"})," is the returned values of ",(0,t.jsx)(n.code,{children:"getTxStatus"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"json-rpc-error-response",children:"JSON RPC Error Response"}),"\n",(0,t.jsxs)(n.p,{children:["If the API method invoked returns an error then the response will have a field\n",(0,t.jsx)(n.code,{children:"error"})," in place of ",(0,t.jsx)(n.code,{children:"result"}),". Additionally, there is an extra field, ",(0,t.jsx)(n.code,{children:"data"}),",\nwhich holds additional information about the error that occurred."]}),"\n",(0,t.jsx)(n.p,{children:"Such a response would look like:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "jsonrpc": "2.0",\n    "error": {\n        "code": -32600,\n        "message": "[Some error message here]",\n        "data": [Object with additional information about the error]\n    },\n    "id": 1\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"other-api-formats",children:"Other API Formats"}),"\n",(0,t.jsx)(n.p,{children:"Some APIs may use a standard other than JSON RPC 2.0 to format their requests\nand responses. Such extension should specify how to make calls and parse\nresponses to them in their documentation."}),"\n",(0,t.jsx)(n.h2,{id:"sending-and-receiving-bytes",children:"Sending and Receiving Bytes"}),"\n",(0,t.jsxs)(n.p,{children:["Unless otherwise noted, when bytes are sent in an API call/response, they are in\nhex representation. However, Transaction IDs (TXIDs), ChainIDs, and subnetIDs\nare in ",(0,t.jsx)(n.a,{href:"https://support.lux.network/en/articles/4587395-what-is-cb58",children:"CB58"}),"\nrepresentation, a base-58 encoding with a checksum."]})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},43540:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var t=s(48318);const i={},o=t.createContext(i);function r(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);
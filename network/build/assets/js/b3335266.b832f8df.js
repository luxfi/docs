"use strict";(self.webpackChunk_luxdocs_network=self.webpackChunk_luxdocs_network||[]).push([[4717],{42023:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>h});var s=t(49214),i=t(43540);const r={tags:["Tooling","LuxJS"],description:"LuxJS is a JavaScript Library for interfacing with the Lux platform. It is built using TypeScript and intended to support both browser and Node.js. The LuxJS library allows one to issue commands to the Lux node APIs.",pagination_label:"Transfer LUX Tokens Between Chains",sidebar_label:"Send Tokens Between Chains",sidebar_position:2},o="Transfer LUX Tokens Between Chains",l={id:"tooling/luxjs-guides/cross-chain-transfers",title:"Transfer LUX Tokens Between Chains",description:"LuxJS is a JavaScript Library for interfacing with the Lux platform. It is built using TypeScript and intended to support both browser and Node.js. The LuxJS library allows one to issue commands to the Lux node APIs.",source:"@site/docs/tooling/luxjs-guides/cross-chain-transfers.md",sourceDirName:"tooling/luxjs-guides",slug:"/tooling/luxjs-guides/cross-chain-transfers",permalink:"/docs/tooling/luxjs-guides/cross-chain-transfers",draft:!1,unlisted:!1,editUrl:"https://github.com/luxfi/docs/edit/main/docs/tooling/luxjs-guides/cross-chain-transfers.md",tags:[{label:"Tooling",permalink:"/docs/tags/tooling"},{label:"LuxJS",permalink:"/docs/tags/lux-js"}],version:"current",sidebarPosition:2,frontMatter:{tags:["Tooling","LuxJS"],description:"LuxJS is a JavaScript Library for interfacing with the Lux platform. It is built using TypeScript and intended to support both browser and Node.js. The LuxJS library allows one to issue commands to the Lux node APIs.",pagination_label:"Transfer LUX Tokens Between Chains",sidebar_label:"Send Tokens Between Chains",sidebar_position:2},sidebar:"tooling",previous:{title:"Generate a Transaction ID Using LuxJS",permalink:"/docs/tooling/luxjs-guides/generate-a-txid-using-luxjs"},next:{title:"Create an Asset on the X-Chain",permalink:"/docs/tooling/luxjs-guides/create-an-asset-on-the-x-chain"}},a={},h=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Getting Started",id:"getting-started",level:2},{value:"Transferring LUX Using LuxJS",id:"transferring-lux-using-luxjs",level:2},{value:"Example Code",id:"example-code",level:3},{value:"Transaction Fee",id:"transaction-fee",level:3},{value:"Testnet Workflow",id:"testnet-workflow",level:2},{value:"Transfer from the X-Chain to the C-Chain",id:"transfer-from-the-x-chain-to-the-c-chain",level:3},{value:"Export the Lux Token From X-Chain to C-Chain",id:"export-the-lux-token-from-x-chain-to-c-chain",level:4},{value:"Private Key",id:"private-key",level:5},{value:"Network Setting",id:"network-setting",level:5},{value:"Verify the Transaction",id:"verify-the-transaction",level:4},{value:"Import the Lux Token From X-Chain to C-Chain",id:"import-the-lux-token-from-x-chain-to-c-chain",level:4},{value:"Transfer from the C-Chain to the X-Chain",id:"transfer-from-the-c-chain-to-the-x-chain",level:3},{value:"Export the Lux Token From C-Chain to X-Chain",id:"export-the-lux-token-from-c-chain-to-x-chain",level:4},{value:"Import the Lux Token From C-Chain to X-Chain",id:"import-the-lux-token-from-c-chain-to-x-chain",level:4},{value:"Mainnet Workflow",id:"mainnet-workflow",level:2},{value:"Local Workflow",id:"local-workflow",level:2},{value:"Start the Local Network",id:"start-the-local-network",level:3},{value:"Locate the Example Code and Make Necessary Changes",id:"locate-the-example-code-and-make-necessary-changes",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"transfer-lux-tokens-between-chains",children:"Transfer LUX Tokens Between Chains"}),"\n",(0,s.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,s.jsx)(n.p,{children:"This article shows how to transfer LUX tokens programmatically between any two\nchains (X/P/C chains) of the Primary Network."}),"\n",(0,s.jsxs)(n.p,{children:["If you are looking for how to transfer LUX tokens using the web wallet, please check out ",(0,s.jsx)(n.a,{href:"https://support.lux.network/en/articles/6169872-how-to-make-a-cross-chain-transfer-in-the-wallet",children:"this article"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["You are familiar with ",(0,s.jsx)(n.a,{href:"/docs/learn/lux/lux-platform",children:"Lux's architecture"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["You have completed ",(0,s.jsx)(n.a,{href:"/docs/nodes/run/node-manually",children:"Run a Lux Node"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["You are familiar with ",(0,s.jsx)(n.a,{href:"https://github.com/luxfi/LuxJS",children:"LuxJS"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["You have installed\n",(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/ts-node#installation",children:"ts-node"})," so that you can\nfollow examples in this tutorial."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,s.jsx)(n.p,{children:"To use LuxJS, you can clone the repo:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-zsh",children:"git clone https://github.com/luxfi/luxjs.git\n"})}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsx)(n.p,{children:"The repository cloning method used is HTTPS, but SSH can be used too:"}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"git clone git@github.com:luxfi/luxjs.git"})}),(0,s.jsxs)(n.p,{children:["You can find more about SSH and how to use it\n",(0,s.jsx)(n.a,{href:"https://docs.github.com/en/authentication/connecting-to-github-with-ssh/about-ssh",children:"here"}),"."]})]}),"\n",(0,s.jsx)(n.p,{children:"or add it to an existing project:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-zsh",children:"yarn add --dev lux\n"})}),"\n",(0,s.jsxs)(n.p,{children:["For this tutorial we will use ",(0,s.jsx)(n.code,{children:"ts-node"})," to run the example scripts directly from a LuxJS directory."]}),"\n",(0,s.jsxs)(n.p,{children:["In order to send LUX, you need to have some LUX. You can use a pre-funded\naccount on local network or get testnet LUX from the ",(0,s.jsx)(n.a,{href:"https://faucet.lux.network",children:"Lux\nFaucet"}),", which is an easy way to get to play around\nwith Lux. After getting comfortable with your code, you can run the code\non Mainnet after making necessary changes."]}),"\n",(0,s.jsx)(n.h2,{id:"transferring-lux-using-luxjs",children:"Transferring LUX Using LuxJS"}),"\n",(0,s.jsxs)(n.p,{children:["The easiest way to transfer LUX between chains is to use\n",(0,s.jsx)(n.a,{href:"https://github.com/luxfi/LuxJS",children:"LuxJS"})," which is a programmatic\nway to access and move LUX."]}),"\n",(0,s.jsx)(n.p,{children:"LuxJS allows you to create and sign transactions locally which is why it\nis the recommended way to transfer LUX between chains. We are moving away from\nusing Luxd's keystore because it requires you to keep your keys on a full\nnode which makes them a target for malicious hackers."}),"\n",(0,s.jsx)(n.h3,{id:"example-code",children:"Example Code"}),"\n",(0,s.jsxs)(n.p,{children:["Following files can be found under the\n",(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/tree/master/examples",children:"examples"}),"\ndirectory of the LuxJS project."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Transfer From >> To"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Export"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Import"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.em,{children:"X-Chain >> C-Chain"})})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/blob/master/examples/avm/buildExportTx-cchain-lux.ts",children:(0,s.jsx)(n.strong,{children:"X-Chain : Export Lux to C-Chain"})})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/blob/master/examples/evm/buildImportTx-xchain.ts",children:(0,s.jsx)(n.strong,{children:"C-Chain : Import Lux from X-Chain"})})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.em,{children:"X-Chain >> P-Chain"})})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/blob/master/examples/avm/buildExportTx-PChain.ts",children:(0,s.jsx)(n.strong,{children:"X-Chain : Export Lux to P-Chain"})})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/blob/master/examples/platformvm/buildImportTx-XChain.ts",children:(0,s.jsx)(n.strong,{children:"P-Chain : Import Lux from X-Chain"})})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.em,{children:"P-Chain >> X-Chain"})})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/blob/master/examples/platformvm/buildExportTx-XChain.ts",children:(0,s.jsx)(n.strong,{children:"P-Chain : Export Lux to X-Chain"})})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/blob/master/examples/avm/buildImportTx-PChain.ts",children:(0,s.jsx)(n.strong,{children:"X-Chain : Import Lux from P-Chain"})})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.em,{children:"P-Chain >> C-Chain"})})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/blob/master/examples/platformvm/buildExportTx-CChain.ts",children:(0,s.jsx)(n.strong,{children:"P-Chain : Export Lux to C-Chain"})})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/blob/master/examples/evm/buildImportTx-PChain.ts",children:(0,s.jsx)(n.strong,{children:"C-Chain : Import Lux from P-Chain"})})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.em,{children:"C-Chain >> X-Chain"})})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/blob/master/examples/evm/buildExportTx-xchain-lux.ts",children:(0,s.jsx)(n.strong,{children:"C-Chain : Export Lux to X-Chain"})})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/blob/master/examples/avm/buildImportTx-cchain.ts",children:(0,s.jsx)(n.strong,{children:"X-Chain : Import Lux from C-Chain"})})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.em,{children:"C-Chain >> P-Chain"})})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/blob/master/examples/evm/buildExportTx-pchain.ts",children:(0,s.jsx)(n.strong,{children:"C-Chain : Export Lux to P-Chain"})})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/blob/master/examples/platformvm/buildImportTx-CChain.ts",children:(0,s.jsx)(n.strong,{children:"P-Chain : Import Lux from C-Chain"})})})]})]})]}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsx)(n.p,{children:"The naming convention in the file and directory names are:"}),(0,s.jsx)(n.p,{children:"AVM is for X-Chain, EVM for C-Chain, and PlatformVM for P-Chain."})]}),"\n",(0,s.jsx)(n.h3,{id:"transaction-fee",children:"Transaction Fee"}),"\n",(0,s.jsxs)(n.p,{children:["Transaction fees are fixed on X-Chain and P-Chain, while dynamic on C-Chain, see\n",(0,s.jsx)(n.a,{href:"/reference/standards/guides/txn-fees#fee-schedule",children:"this article"})," for details. When transferring\ntokens, please take fee into consideration in calculating total amount to be\ntransferred."]}),"\n",(0,s.jsx)(n.h2,{id:"testnet-workflow",children:"Testnet Workflow"}),"\n",(0,s.jsxs)(n.p,{children:["This tutorial uses ",(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/blob/master/examples/avm/buildExportTx-cchain-lux.ts",children:(0,s.jsx)(n.strong,{children:"X-Chain to\nC-Chain"})}),"\ntransfers as an example. Transferring between other chains are very similar."]}),"\n",(0,s.jsx)(n.h3,{id:"transfer-from-the-x-chain-to-the-c-chain",children:"Transfer from the X-Chain to the C-Chain"}),"\n",(0,s.jsx)(n.p,{children:"To transfer a specified amount token from X-Chain to C-Chain, the token needs to\nbe first exported from the X-Chain to the atomic memory, from where it is then\nimported to C-Chain."}),"\n",(0,s.jsx)(n.h4,{id:"export-the-lux-token-from-x-chain-to-c-chain",children:"Export the Lux Token From X-Chain to C-Chain"}),"\n",(0,s.jsxs)(n.p,{children:["Select the\n",(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/tree/master/examples/avm",children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"examples/avm"})})}),"\nfolder to view the LuxJS X-Chain examples. To export LUX from the X-Chain\nto the C-Chain, select\n",(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/blob/master/examples/avm/buildExportTx-cchain-lux.ts",children:(0,s.jsx)(n.code,{children:"avm/buildExportTx-cchain-lux.ts"})}),"."]}),"\n",(0,s.jsx)(n.h5,{id:"private-key",children:"Private Key"}),"\n",(0,s.jsx)(n.p,{children:"Locate this line in the file"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const privKey: string = `${PrivateKeyPrefix}${DefaultLocalGenesisPrivateKey}`;\n"})}),"\n",(0,s.jsx)(n.p,{children:"and replace this with a private key that you control."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'const privKey: string = "<YOUR-PRIVATE-KEY-HERE>";\n'})}),"\n",(0,s.jsx)(n.h5,{id:"network-setting",children:"Network Setting"}),"\n",(0,s.jsxs)(n.p,{children:["The following settings work when using a local node started with ",(0,s.jsx)(n.a,{href:"/docs/nodes/configure/luxd-config-flags#network-id",children:(0,s.jsx)(n.code,{children:"--network-id=testnet"})}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'const ip: string = "localhost";\nconst port: number = 9650;\nconst protocol: string = "http";\nconst networkID: number = 5;\n'})}),"\n",(0,s.jsxs)(n.p,{children:["However, to connect directly to the ",(0,s.jsx)(n.a,{href:"/docs/tooling/rpc-providers",children:"Lux Testnet API server"}),", the following changes are\nneeded:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'const ip: string = "api.lux-test.network";\nconst port: number = 443;\nconst protocol: string = "https";\nconst networkID: number = 5;\n'})}),"\n",(0,s.jsx)(n.p,{children:"Depending on the networkID passed in when instantiating Lux, the encoded\naddresses used will have a distinctive Human Readable Part(HRP) per each\nnetwork."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.em,{children:["Example Address: 5 - X-",(0,s.jsx)(n.code,{children:"testnet"}),"19rknw8l0grnfunjrzwxlxync6zrlu33yxqzg0h"]})}),"\n",(0,s.jsx)(n.p,{children:"For Testnet, 5 is the correct value to use."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const networkID: number = 5;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["To learn more about encoded addresses, click ",(0,s.jsx)(n.a,{href:"/docs/tooling/luxjs-guides/manage-x-chain-keys#encode-bech32-addresses",children:"here"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Set the Correct Amount To Send:"})}),"\n",(0,s.jsx)(n.p,{children:"By default the scripts send the wallet's entire LUX balance:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const balance: BN = new BN(getBalanceResponse.balance);\nconst amount: BN = balance.sub(fee);\n"})}),"\n",(0,s.jsxs)(n.p,{children:["To send a different amount, please replace the code above with the following.\nBelow sets a new value of 0.01 LUX (",(0,s.jsx)(n.code,{children:"10000000"})," Gwei). Value is set in Gwei\nformat where ",(0,s.jsx)(n.code,{children:"1,000,000,000"})," Gwei = 1 LUX"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'const value: BN = new BN("10000000");\nconst amount: BN = value.sub(fee);\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Snowtrace provides a ",(0,s.jsx)(n.a,{href:"https://snowtrace.io/unitconverter",children:"unit converter"})," between different units"]})}),"\n",(0,s.jsx)(n.p,{children:"Run the export script:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"ts-node examples/avm/buildExportTx-cchain-lux.ts\n"})}),"\n",(0,s.jsx)(n.p,{children:"This returns:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"Success! TXID: 2uQvMcPZjmPXAyvz9cdKBphDDSmnxxx3vsUrxqpj3U92hsfQcc\n"})}),"\n",(0,s.jsx)(n.h4,{id:"verify-the-transaction",children:"Verify the Transaction"}),"\n",(0,s.jsxs)(n.p,{children:["You can now pass this txID ",(0,s.jsx)(n.code,{children:"2uQvMcPZjmPXAyvz9cdKBphDDSmnxxx3vsUrxqpj3U92hsfQcc"}),"\ninto\n",(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/blob/master/examples/avm/getTx.ts",children:"examples/avm/getTx.ts"}),",\nplus other similar network settings, then you can run"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-zsh",children:"ts-node examples/avm/getTx.ts\n"})}),"\n",(0,s.jsx)(n.p,{children:"which returns:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"{\n  unsignedTx: {\n    networkID: 5,\n    blockchainID: '2JVSBoinj9C2J33VntvzYtVJNZdN2NKiwwKjcumHUWEb5DbBrm',\n    outputs: [ [Object] ],\n    inputs: [ [Object], [Object] ],\n    memo: '0x41564d207574696c697479206d6574686f64206275696c644578706f7274547820746f206578706f7274204156415820746f2074686520432d436861696e2066726f6d2074686520582d436861696e',\n    destinationChain: 'yH8D7ThNJkxmtkuv2jgBa4P1Rn3Qpr4pPr7QYNfcdoS6k6HWp',\n    exportedOutputs: [ [Object] ]\n  },\n  credentials: [\n    {\n      fxID: 'spdxUxVJQbX85MGxMHbKw1sHxMnSqJ3QBzDyDYEP3h6TLuxqQ',\n      credential: [Object]\n    },\n    {\n      fxID: 'spdxUxVJQbX85MGxMHbKw1sHxMnSqJ3QBzDyDYEP3h6TLuxqQ',\n      credential: [Object]\n    }\n  ]\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"import-the-lux-token-from-x-chain-to-c-chain",children:"Import the Lux Token From X-Chain to C-Chain"}),"\n",(0,s.jsxs)(n.p,{children:["Select the\n",(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/tree/master/examples/evm",children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"examples/evm"})})}),"\nfolder to view the LuxJS C-Chain examples. To import LUX to the C-Chain\nfrom the X-Chain, select\n",(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/blob/master/examples/evm/buildImportTx-xchain.ts",children:(0,s.jsx)(n.code,{children:"evm/buildImportTx-xchain.ts"})})]}),"\n",(0,s.jsxs)(n.p,{children:["Copy the ",(0,s.jsx)(n.a,{href:"#network-setting",children:"network setting from above"})," into ",(0,s.jsx)(n.code,{children:"evm/buildImportTx-xchain.ts"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Navigate to this part of the code and ensure that the ",(0,s.jsx)(n.code,{children:"cHexAddress"}),"(",(0,s.jsx)(n.em,{children:"Your\nC-Chain wallet address"}),") and ",(0,s.jsx)(n.code,{children:"private key"})," are correct:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'const cHexAddress: string = "<YOUR-CCHAIN-WALLET-ADDRESS-HERE>";\nconst privKey: string = "<YOUR-PRIVATE-KEY-HERE>";\n'})}),"\n",(0,s.jsx)(n.p,{children:"Run the import script:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"ts-node examples/evm/buildImportTx-xchain.ts\n"})}),"\n",(0,s.jsx)(n.p,{children:"This returns:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"Success! TXID: 2uQvMcPZjmPXAyvz9cdKBphDDSmnxxx3vsUrxqpj3U92hsfQcc\n"})}),"\n",(0,s.jsx)(n.p,{children:"That's it! You've transferred LUX from the X-Chain to C-Chain!"}),"\n",(0,s.jsxs)(n.p,{children:["You can verify this TX by copy / pasting the import TXID into ",(0,s.jsx)(n.a,{href:"https://testnet.avascan.info/blockchain/c/tx/2uQvMcPZjmPXAyvz9cdKBphDDSmnxxx3vsUrxqpj3U92hsfQcc",children:"Avascan"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"transfer-from-the-c-chain-to-the-x-chain",children:"Transfer from the C-Chain to the X-Chain"}),"\n",(0,s.jsx)(n.p,{children:"To return the LUX back to the X-Chain, you need to do the transfer in the opposite direction."}),"\n",(0,s.jsx)(n.h4,{id:"export-the-lux-token-from-c-chain-to-x-chain",children:"Export the Lux Token From C-Chain to X-Chain"}),"\n",(0,s.jsxs)(n.p,{children:["Select the\n",(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/tree/master/examples/evm",children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"examples/evm"})})}),"\nfolder to view the LuxJS C-Chain examples. To export LUX from the X-Chain\nto the C-Chain, select\n",(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/blob/master/examples/evm/buildExportTx-xchain-lux.ts",children:(0,s.jsx)(n.code,{children:"evm/buildExportTx-xchain-lux.ts"})}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Make necessary changes as above for private key and network settings."}),"\n",(0,s.jsxs)(n.p,{children:["You can change the amount of LUX to send by editing the ",(0,s.jsx)(n.em,{children:"BN"})," variable:\n",(0,s.jsx)(n.code,{children:"luxAmount"}),". The sample code assigns this as ",(0,s.jsx)(n.code,{children:"1e7"})," or ",(0,s.jsx)(n.code,{children:"10000000"})," (0.01 LUX)"]}),"\n",(0,s.jsx)(n.p,{children:"The fee here will only be for exporting the asset. The import fees will be\ndeducted from the UTXOs present on the Exported Atomic Memory, a memory location\nwhere UTXOs stay after getting exported but before being imported."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"let luxAmount: BN = new BN(1e7);\nlet fee: BN = baseFee.div(new BN(1e9));\nfee = fee.add(new BN(1e6));\n"})}),"\n",(0,s.jsx)(n.p,{children:"Run the export script:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-zsh",children:"luxjs $ ts-node examples/evm/buildExportTx-xchain-lux.ts\nSuccess! TXID: UAez3DTv26qmhKKFDvmQTayaXTPAVahHenDKe6xnUMhJbKuxc\n"})}),"\n",(0,s.jsx)(n.h4,{id:"import-the-lux-token-from-c-chain-to-x-chain",children:"Import the Lux Token From C-Chain to X-Chain"}),"\n",(0,s.jsxs)(n.p,{children:["Before we run the ",(0,s.jsx)(n.a,{href:"https://github.com/luxfi/luxjs/blob/master/examples/avm/buildImportTx-cchain.ts",children:"example import\nscript"}),",\nwe need to make some changes to the code:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Change the ",(0,s.jsx)(n.a,{href:"#network-setting",children:"Network Setting"})," to meet Testnet network requirements."]}),"\n",(0,s.jsxs)(n.li,{children:["Import your Private Key by following the steps listed ",(0,s.jsx)(n.a,{href:"#private-key",children:"here"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Run the Script!"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-zsh",children:"luxjs $ ts-node examples/avm/buildImportTx-cchain.ts\nSuccess! TXID: Sm6Ec2GyguWyG3Li1pARmTpaZ6qLEPuVAHV8QBGL9JWwWAEgM\n"})}),"\n",(0,s.jsx)(n.h2,{id:"mainnet-workflow",children:"Mainnet Workflow"}),"\n",(0,s.jsx)(n.p,{children:"The Testnet workflow above can be adapted to Mainnet with the following modifications:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The correct private key."}),"\n",(0,s.jsxs)(n.li,{children:["Network setting should be to a Mainnet node, either ",(0,s.jsx)(n.a,{href:"/docs/nodes/configure/luxd-config-flags#network-id",children:"a local node on Mainnet"})," or\n",(0,s.jsx)(n.a,{href:"/docs/tooling/rpc-providers#using-the-public-api-nodes",children:"Lux Mainnet API server"}),"\nwhere ",(0,s.jsx)(n.code,{children:"api.lux.network"})," should be used for the ",(0,s.jsx)(n.code,{children:"ip"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"const networkID: number = 1"})," based on ",(0,s.jsx)(n.a,{href:"/docs/tooling/luxjs-guides/manage-x-chain-keys#encode-bech32-addresses",children:"this"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Set the correct amount to send."}),"\n",(0,s.jsx)(n.li,{children:"The correct receiving address."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"local-workflow",children:"Local Workflow"}),"\n",(0,s.jsx)(n.h3,{id:"start-the-local-network",children:"Start the Local Network"}),"\n",(0,s.jsxs)(n.p,{children:["Follow\n",(0,s.jsx)(n.a,{href:"/docs/tooling/netrunner#start-a-new-network-with-five-nodes",children:"this"}),"\nto start a 5-node local network. Make sure that you get one of the port number\nby following\n",(0,s.jsx)(n.a,{href:"/docs/tooling/netrunner#get-api-endpoints-of-all-nodes-in-the-cluster",children:"this"}),".\nIn this tutorial, we will assume one of the ports is 30301."]}),"\n",(0,s.jsx)(n.h3,{id:"locate-the-example-code-and-make-necessary-changes",children:"Locate the Example Code and Make Necessary Changes"}),"\n",(0,s.jsx)(n.p,{children:"Most of the code are already set to run it on a local network. Do check the\nfollowing values to make sure they are correct."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'const ip: string = "localhost";\nconst port: number = 30301; // Change this to the correct value\nconst protocol: string = "http";\nconst networkID: number = 1337;\n'})}),"\n",(0,s.jsx)(n.p,{children:"Then run the export and import scripts to transfer tokens across chains."})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},43540:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var s=t(48318);const i={},r=s.createContext(i);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);